<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<link rel="stylesheet" rev="stylesheet" href="http://www.lxj.name/case_style/case.css" type="text/css" media="all" />
<title>缓动下拉菜单</title>
<style type="text/css">
a{color:#333; text-decoration:none}
ul,li{list-style:decimal-leading-zero;}
</style>
<script type="text/javascript">
function $(o){return document.getElementById(o)}
</script>
</head>

<body>
<!--wrapper-->
<div id="wrapper">
  <!--container-->
  <div id="container">
    <!--article-->
    <div class="article">
      <h1>缓动下拉菜单</h1>
      <!--article-bd-->
      <div class="article-bd">
          <div id="on" style="cursor:pointer; padding-bottom:5px" class="SliderHandle">收缩</div>
          <div id="ceshi" style="margin:0 30px;background:#f9f9f9;border:1px solid #eee; overflow:hidden" class="SliderBx">             
          <ul class="tList" style="padding:10px;">
          <li><a href="http://club.pps.tv/topic/24793/981593/1.html" target="_blank">北京天安门红色盛装亮相迎国庆</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980705/1.html" target="_blank">送祝福―庆祝祖国母亲60周年</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980791/1.html" target="_blank">国庆60周年阅兵有三支娘子军</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980657/1.html" target="_blank">天安门金水桥大修迎新中国60年</a></li> 
          <li><a href="http://club.pps.tv/topic/24793/980653/1.html" target="_blank">外媒关注国庆庆典称最大生日派对</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980682/1.html" target="_blank">照片征集国庆60年展全国各地新貌</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980650/1.html" target="_blank">新中国公益事业:60年只是个开始</a></li>
          <li><a href="http://club.pps.tv/topic/24793/981459/1.html" target="_blank">首批战斗机女飞行员参加国庆阅兵</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980815/1.html" target="_blank">国庆60年照片征集《我和天安门》</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980642/1.html" target="_blank">国家图书馆迎来百岁华诞[组图]</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980919/1.html" target="_blank">中国传奇追忆祖国60年辉煌时刻</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980625/1.html" target="_blank">香港妇女界举行晚会庆建国60年</a></li> 
          <li><a href="http://club.pps.tv/topic/24793/981592/1.html" target="_blank">北京天坛举行国庆游园安保演练</a></li>
          <li><a href="http://club.pps.tv/topic/24793/981595/1.html" target="_blank">北京对天安门及周边交通管制</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980656/1.html" target="_blank">新中国60年交通发展铺就腾飞路</a></li>
          <li><a href="http://club.pps.tv/topic/24793/980643/1.html" target="_blank">千人书画迎国庆[组图]</a></li>
          </ul>
          </div>
          
          <div id="on1" style="cursor:pointer; padding-bottom:5px" class="SliderHandle">展开</div>
          <div id="ceshi1" style="margin:0 30px;display:none;background:#f9f9f9;border:1px solid #eee; overflow:hidden" class="SliderBx"> 
           <ul class="tList" style="padding:10px;">
              <li><a href="http://news.pps.tv/2009-09-18/31/15/313833.html" title="求解放、求发展、求和谐--"二七"纪念塔下的故事" target="_blank">求解放、求发展、求和谐--"二七"纪念塔下的故事</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/31/15/313828.html" title="从分割到统筹：中国城乡关系在60年的改革中走向和谐" target="_blank">从分割到统筹：中国城乡关系在60年的改革中走向和谐</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/30/15/313820.html" title="我国农产品：告别“提篮小卖”跨进期货时代" target="_blank">我国农产品：告别“提篮小卖”跨进期货时代</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/30/15/313816.html" title="在灿烂的阳光下--新中国人权事业发展足迹" target="_blank">在灿烂的阳光下--新中国人权事业发展足迹</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/29/15/313815.html" title="李长春看望大型音乐舞蹈史诗《复兴之路》主创和演职人员" target="_blank">李长春看望大型音乐舞蹈史诗《复兴之路》主创和演职人员</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/29/15/313812.html" title="为了人与自然和谐共存― ―新中国60年生态建设扫描" target="_blank">为了人与自然和谐共存― ―新中国60年生态建设扫描</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/29/15/313810.html" title="新中国60年光辉历程启示：艰辛的探索 辉煌的成就" target="_blank">新中国60年光辉历程启示：艰辛的探索 辉煌的成就</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/28/15/313802.html" title="新中国60年的辉煌成就和伟大道路" target="_blank">新中国60年的辉煌成就和伟大道路</a></li>
              <li><a href="http://news.pps.tv/2009-09-18/28/15/313801.html" title="从贫困向全面小康迈进――新中国60年人民生活水平连续跨越台阶" target="_blank">从贫困向全面小康迈进――新中国60年人民生活水平连续跨越台阶</a></li>
             </ul>
          </div>
          
<script type="text/javascript">
function SliderLayer(s){
	 this.SetOptions(s);
	 this.handle=this.options.handle();
	 this.handleBx=this.options.handleBx();
	 this.interval=this.options.interval;
	 this.Tween=this.options.Tween;
	 this.evt=this.options.evt;
	 this.hd_start=this.B(this,this.options.hd_start);
	 this.hd_end=this.B(this,this.options.hd_end);
	 this.run();
}
SliderLayer.prototype={
      $:function(o){return typeof(o)=='string' ? document.getElementById(o) : o},
	  on:function (node,type,listener) {
			if(!(node = this.$(node))) return false;
			if (node.addEventListener) {
				node.addEventListener( type, listener, false );
				return true;
			} else if(node.attachEvent) {
				node['e'+type+listener] = listener;
				node[type+listener] = function(){node['e'+type+listener]( window.event );}
				node.attachEvent( 'on'+type, node[type+listener] );
				return true;
			}
			return false;
	  },
	  B:function(object, fun) {
		var args = Array.prototype.slice.call(arguments).slice(2);
		return function() {
			return fun.apply(object, args);
		}
	   },
	  E:function(destination, source) {
		for (var property in source) {
		  destination[property] = source[property];
		}
	  },
	  uncamelize:function(s, sep) {
		  sep = sep || '-';
		  return s.replace(/([a-z])([A-Z])/g, function (strMatch, p1, p2){
			  return p1 + sep + p2.toLowerCase();
		  });
	  },
	  camelize:function(s) {
		  return s.replace(/-(\w)/g, function (strMatch, p1){
			  return p1.toUpperCase();
		  });
	  },
	  setStyle:function(element, styles) {
		  if(!(element = this.$(element))) return false;
		  for (property in styles) {
			  if(!styles.hasOwnProperty(property)) continue;
			  if(element.style.setProperty) {
				  element.style.setProperty(
				  this.uncamelize(property,'-'),styles[property],null);
			  } else {
				  element.style[this.camelize(property)] = styles[property];
			  }
		  }
		  return true;
	  },
	  getEle:function(o){
		  var obj=this.$(o),w=obj.offsetWidth,h=obj.offsetHeight;
		  if(w==0){
			  this.setStyle(obj,{'position':'absolute','display':'block','visibility':'hidden'})
			  w=obj.offsetWidth;
			  h=obj.offsetHeight;
			  this.setStyle(obj,{'position':'static','display':'none','visibility':'visible'})
		  }
		  return {
			  'w':w,
			  'h':h
		  }
	  },
	 SetOptions:function(s){
		this.options={
			handle:function(){},
			handleBx:function(){},
			evt:'click',//触发菜单的方式
			eKey:0,//0为收缩状态，1为展开状态
			interval:30,//下拉缓动的时间
			showDelay:10,//下拉延时时间
			hideDelay:300,//收缩延时时间
			dis:['height'],
	        Tween:function(t,b,c,d){return c*(t/=d)*t + b;},
			hd_start:function(){},
			hd_end:function(){}
		  };
		  this.E(this.options,s||{})
	  },
	 slider:function(o){
		var n=o.nub,b=0,c=this.getEle(this.handleBx[n]).h,d=this.interval,t=0,timer,mKey=1;
		timer && clearTimeout(timer);
		this.start=function(){
		   this.setStyle(this.handleBx[n],{'height': (mKey ? (Math.ceil(this.Tween(t,b,c,d)) + "px") : (c-Math.ceil(this.Tween(t,b,c,d)) + "px"))})
		   if(t<d){t++;timer=setTimeout(this.B(this,this.start), 10);}else{t=0;
		   if(!mKey) this.setStyle(this.handleBx[n],{'display':'none'});
		   }
		};
		this.start();
		 
	 },
	 run:function(){
		  if(this.handle.length!=this.handleBx.length) return false;
		  for(var i=0,len=this.handle.length;i<len;i++){
			  this.handle[i].nub=i;
			  this.on(this.handle[i],this.evt,this.B(this,this.slider,this.handle[i]));
		  }
	 }
	  
};

function getCN(node, name, type) {
	  if (node.getElementsByClassName)
		  return node.getElementsByClassName(name);
		  else {
		  var r = [], re = new RegExp("(^|\\s)" + name + "(\\s|$)"), e = (node || document).getElementsByTagName(type || "*");
		  for ( var i = 0; i < e.length; i++ ) {
			  if( re.test(e[i].className) )
				  r.push(e[i]);
		  }
		  return r;
	  }
};
new SliderLayer({
				'handle':function(){return getCN(document,'SliderHandle','div')},
				'handleBx':function(){return getCN(document,'SliderBx','div')}
				})
;
/*(function(){
  var last={};
  function dm(hand,obj){
		var Tween=function(t,b,c,d){
					if ((t/=d/2) < 1) return c/2*t*t + b;
					return -c/2 * ((--t)*(t-2) - 1) + b;
				};
		var o=$(obj);
		var m=function(){return Math.max(o.scrollHeight,o.offsetHeight)}
		var oheight=m();
		  o.style.overflow="hidden"
		  if(oheight==0){
				  o.style.display="block";
				  oheight=m();
				  if(oheight!=0){o.style.height="0";}
				  o.style.display="none";
			}else{(o.style.height=oheight+"px");}
		var b=0,c=oheight,d=30,t=0;
		var mKey=0,timer;
		function Run(){
		   o.style.height =mKey ? (Math.ceil(Tween(t,b,c,d)) + "px") : (c-Math.ceil(Tween(t,b,c,d)) + "px");
		   if(t<d){t++;timer=setTimeout(Run, 10);}else{t=0;
			if(!mKey) o.style.display="none";
		   }
		};
		function on(){
			timer && clearTimeout(timer);
			mKey=(o.style.height && o.style.height!=(oheight+"px")) ? 1 :0
			o.style.display="block";
			Run();
			mKey ? (this.innerHTML="收缩") :(this.innerHTML="展开");
		}
		$(hand).onclick=on;
			
	  }
  window.onload=function(){
	  dm("on","ceshi");
	  dm("on1","ceshi1");
  }
})()*/
</script>
          
      </div>
      <!--/article-bd-->
    </div>
    <!--/article-->
  </div>
  <!--/container-->
</div>
<!--/wrapper-->

</body>
</html>

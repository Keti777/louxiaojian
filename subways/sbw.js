var Fe=Fe||{version:"20080809",emptyFn:function(){}};Fe.Ajax=function(b){this.url="";this.data="";this.async=true;this.duration=-1;this.overtime=false;this.username="";this.password="";this.method="GET";if(typeof b=="object"&&b){for(var a in b){this[a]=b[a]}}};(function(){Fe.Ajax.prototype.request=function(d,k){var i=this,g=b(),l=g.xhr;g.active=true;i.url=d;if(typeof k=="string"&&k){i.data=k}if(typeof i.onexecute=="function"){i.onexecute(l)}try{if(!i.username){l.open(i.method,i.url,i.async)}else{l.open(i.method,i.url,i.async,i.username,i.password)}if(i.async){l.onreadystatechange=h}if(i.method.toUpperCase()=="POST"){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}i.beginTime=new Date().getTime();if(i.duration>0){j()}l.send(i.data)}catch(f){if(typeof i.onerror=="function"){i.onerror(f)}}if(!i.async){h()}function h(){if(l.readyState==4){try{l.status}catch(m){if(typeof i.ondisconnect=="function"){i.ondisconnect(l)}g.active=false;return}i.duration=-1;if(!i.overtime){if(typeof i["on"+l.status]=="function"){i["on"+l.status](l)}if(l.status==200&&l.statusText.toLowerCase()=="ok"){if(typeof i.onsuccess=="function"){i.onsuccess(l)}}else{if(typeof i.onfailure=="function"){i.onfailure(l)}}}g.active=false;l.onreadystatechange=function(){}}}function j(){if(i.duration==-1){return}if(new Date().getTime()-i.beginTime>i.duration){i.duration=-1;try{l.abort()}catch(m){}i.overtime=true;g.active=false;if(typeof i.ontimeout=="function"){i.ontimeout(l)}}setTimeout(function(){j()},10)}};var c=[];function b(){var g=c;for(var f=null,d=0;d<g.length;d++){f=g[d];if(!f.active){break}}if(d>=g.length){f={active:false,xhr:a()};g[g.length]=f}return f}function a(){if(window.XMLHttpRequest){var g=new XMLHttpRequest();Fe.on(window,"onunload",function(){g.abort()});return g}else{if(window.ActiveXObject){var h=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"];for(var f=0;h[f];f++){try{var g=new ActiveXObject(h[f]);Fe.on(window,"onunload",function(){g.abort()});return g}catch(d){}}throw new Error("Your browser do not support XMLHttp")}}}})();Fe.Ajax.get=function(a,b){return this.request(a,b)};Fe.Ajax.request=function(b,c,a){if(typeof c=="object"&&c){a=c;c=null}else{if(typeof c=="function"){a=a||{};a.onsuccess=c;c=null}}var d=new Fe.Ajax(a);d.request(b,c);return d};(function(){Fe._log=[];var a=0;var b={};Fe.BaseClass=function(c){b[(this.hashCode=(c||Fe.BaseClass.guid()))]=this};Fe.BaseClass.guid=function(){return"mz_"+(a++).toString(36)};Fe.BaseClass.create=function(){var d=new Fe.BaseClass();d.decontrol();return d};window.Instance=Fe.instance=Fe.I=function(c){return b[c]};Fe.BaseClass.prototype.dispose=function(){if(this.hashCode){delete b[this.hashCode]}for(var c in this){if(typeof this[c]!="function"){delete this[c]}}};Fe.BaseClass.prototype.getHashCode=function(){if(!this.hashCode){b[(this.hashCode=Fe.BaseClass.guid())]=this}return this.hashCode};Fe.BaseClass.prototype.decontrol=function(){delete b[this.hashCode]};Fe.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};Fe.BaseClass.prototype._wlog=function(d,f){var c=Fe._log;if(c.length>100){c.reverse().length=50;c.reverse()}c[c.length]="["+d+"]["+(this._className||"Object")+" "+this.hashCode+"] "+f}})();Function.prototype.inherits=function(c,b){var a,d,g=this.prototype,f=function(){};f.prototype=c.prototype;d=this.prototype=new f();if(typeof(b)=="string"){d._className=b}for(a in g){d[a]=g[a]}this.prototype.constructor=g.constructor;g=f=null;return d};Fe.Browser=(function(){var c=navigator.userAgent;var h=0,a=0,g=0,f=0;var d=0,i=0,b=0;if(typeof(window.opera)=="object"&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(c)){a=parseFloat(RegExp.$2)}else{if(/MSIE (\d+(\.\d+)?)/.test(c)){h=parseFloat(RegExp.$1)}else{if(/Firefox(\s|\/)(\d+(\.\d+)?)/.test(c)){f=parseFloat(RegExp.$2)}else{if(navigator.vendor=="Netscape"&&/Netscape(\s|\/)(\d+(\.\d+)?)/.test(c)){b=parseFloat(RegExp.$2)}else{if(c.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(c)){g=parseFloat(RegExp.$1)}}}}}if(c.indexOf("Gecko")>-1&&c.indexOf("KHTML")==-1&&/rv\:(\d+(\.\d+)?)/.test(c)){i=parseFloat(RegExp.$1)}return{ie:h,firefox:f,gecko:i,netscape:b,opera:a,safari:g}})();window.FeBrowser=Fe.Browser;Fe.copy=function(b){var a=Fe.copy._node;if(!a){a=Fe.copy._node=document.createElement("DIV");a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a)}a.innerHTML=["<embed ",'src="img/clipboard.swf" ','FlashVars="clipboard=',encodeURIComponent(String(b)),'" ','width="0" ','height="0" ','type="application/x-shockwave-flash"></embed>'].join("")};Fe.G=function(){for(var b=[],c=arguments.length-1;c>-1;c--){var d=arguments[c];b[c]=null;if(typeof d=="object"&&d&&d.dom){b[c]=d.dom}else{if((typeof d=="object"&&d&&d.tagName)||d==window||d==document){b[c]=d}else{if(typeof d=="string"&&(d=document.getElementById(d))){b[c]=d}}}}return b.length<2?b[0]:b};if(typeof(HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("children",function(){for(var c=[],d=0,g,f=0,b=this.childNodes.length;f<b;f++){g=this.childNodes[f];if(g.nodeType==1){c[d++]=g;if(g.name){if(!c[g.name]){c[g.name]=[]}c[g.name][c[g.name].length]=g}if(g.id){c[g.id]=g}}}return c})}Fe.ac=function(a,b){if(!(a=this.G(a))){return}b=this.trim(b);if(!new RegExp("(^| )"+b.replace(/(\W)/g,"\\$1")+"( |$)").test(a.className)){a.className=a.className.split(/\s+/).concat(b).join(" ")}};Fe.addClassName=Fe.ac;Fe.extend=function(g,d){if(g&&d&&typeof(d)=="object"){for(var f in d){g[f]=d[f]}var c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var a=0,b;a<c.length;a++){b=c[a];if(Object.prototype.hasOwnProperty.call(d,b)){g[b]=d[b]}}}return g};Fe.on=function(c,b,a){if(!(c=Fe.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c[b+a]=function(){a.call(c,window.event)};c.attachEvent("on"+b,c[b+a])}else{c.addEventListener(b,a,false)}return c};Fe.un=function(c,b,a){if(!(c=Fe.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c.detachEvent("on"+b,c[b+a]);c[b+a]=null}else{c.removeEventListener(b,a,false)}return c};Fe.rc=function(a,b){if(!(a=this.G(a))){return}b=this.trim(b);var d=a.className.replace(new RegExp("(^| +)"+b.replace(/(\W)/g,"\\$1")+"( +|$)","g"),"$2");if(a.className!=d){a.className=d}};Fe.removeClassName=Fe.rc;Fe.trim=function(a){return a.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")};Fe.copy=function(b){var a=Fe.copy._node;if(!a){a=Fe.copy._node=document.createElement("DIV");a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a)}a.innerHTML=["<embed ",'src="img/clipboard.swf" ','FlashVars="clipboard=',encodeURIComponent(String(b)),'" ','width="0" ','height="0" ','type="application/x-shockwave-flash"></embed>'].join("")};Fe.Array={};Fe.Array.indexOf=function(d,a,b){var c=d.length,f=Number(b)||0;f=(f<0)?Math.ceil(f):Math.floor(f);if(f<0){f+=c}for(;f<c;f++){if(f in d&&d[f]===a){return f}}return -1};Fe.Array.contains=function(a,b){return Fe.Array.indexOf(a,b)>=0};Fe.Array.unique=function(b){var c=[];for(var a=0;a<b.length;a++){if(!Fe.Array.contains(c,b[a])){c.push(b[a])}}return c};Fe.Cookie=function(b){var a="";b=b||{};if(/https?:\/\/[^\/]+([^\?]+)/i.test(location.href)){a=RegExp.$1}this.path=(b.path||a||"/").replace(/(\/)[^\/]*$/,"$1");this.expires=b.expires||"";this.domain=b.domain||document.domain||"";this.secure=b.secure||""};Fe.Cookie.set=function(c,d,a){if(/;=/g.test(c)){throw new Error('Invalid cookie name "'+c+'"')}if(/;/g.test(d)){throw new Error('Invalid cookie value "'+d+'"')}var b=new Fe.Cookie(a);b.set(c,d);return b};Fe.Cookie.prototype.set=function(b,c){var a=new Date();if(typeof(this.expires)=="number"){a.setTime(a.getTime()+this.expires)}document.cookie=b+"="+escape(c)+";expires="+a.toGMTString()+";path="+this.path+(this.domain==""?"":("; domain="+this.domain))+(this.secure?"; secure":"")};Fe.Cookie.add=function(a,b,c){return Fe.Cookie.set(a,b,c)};Fe.Cookie.remove=function(a){return Fe.Cookie.set(a,"",{expires:-1*57005*57005})};Fe.Cookie.get=function(b){var c=new RegExp("(^| )"+b+"=([^;]*)(;|$)");var a=document.cookie.match(c);if(a){return unescape(a[2])}return null};Fe.getByteLength=function(a){return a.replace(/[^\x00-\xff]/g,"mm").length};Fe.subByte=function(k,c,h){if(Fe.getByteLength(k)<=c){return k}var n,m,j,d;for(var g=Math.floor(c/2)-1,f=k.length;g<f;g++){n=k.substr(0,g);j=Fe.getByteLength(n);if(j==c){if(h){n+=h}return n}else{m=k.substr(0,g+1);d=Fe.getByteLength(m);if(j<c&&d>c){if(h){n+=h}return n}}}return k};Fe.Ajax=function(b){this.url="";this.data="";this.async=true;this.duration=-1;this.overtime=false;this.username="";this.password="";this.method="GET";if(typeof b=="object"&&b){for(var a in b){this[a]=b[a]}}};(function(){Fe.Ajax.prototype.request=function(d,k){var i=this,g=b(),l=g.xhr;g.active=true;i.url=d;if(typeof k=="string"&&k){i.data=k}if(typeof i.onexecute=="function"){i.onexecute(l)}try{if(!i.username){l.open(i.method,i.url,i.async)}else{l.open(i.method,i.url,i.async,i.username,i.password)}if(i.async){l.onreadystatechange=h}if(i.method.toUpperCase()=="POST"){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}i.beginTime=new Date().getTime();if(i.duration>0){j()}l.send(i.data)}catch(f){if(typeof i.onerror=="function"){i.onerror(f)}}if(!i.async){h()}function h(){if(l.readyState==4){try{l.status}catch(m){if(typeof i.ondisconnect=="function"){i.ondisconnect(l)}g.active=false;return}i.duration=-1;if(!i.overtime){if(typeof i["on"+l.status]=="function"){i["on"+l.status](l)}if(l.status==200&&l.statusText.toLowerCase()=="ok"){if(typeof i.onsuccess=="function"){i.onsuccess(l)}}else{if(typeof i.onfailure=="function"){i.onfailure(l)}}}g.active=false;l.onreadystatechange=function(){}}}function j(){if(i.duration==-1){return}if(new Date().getTime()-i.beginTime>i.duration){i.duration=-1;try{l.abort()}catch(m){}i.overtime=true;g.active=false;if(typeof i.ontimeout=="function"){i.ontimeout(l)}}setTimeout(function(){j()},10)}};var c=[];function b(){var g=c;for(var f=null,d=0;d<g.length;d++){f=g[d];if(!f.active){break}}if(d>=g.length){f={active:false,xhr:a()};g[g.length]=f}return f}function a(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){var g=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"];for(var f=0;g[f];f++){try{return new ActiveXObject(g[f])}catch(d){}}throw new Error("Your browser do not support XMLHttp")}}}})();Fe.Ajax.request=function(b,c,a){if(typeof c=="object"&&c){a=c;c=null}else{if(typeof c=="function"){a=a||{};a.onsuccess=c;c=null}}var d=new Fe.Ajax(a);d.request(b,c);return d};function CreateFlash(c,a,b,d,g){var f="<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0' width='"+b+"' height='"+d+"' id='"+c+"' align='middle'>";f+="<param name='allowScriptAccess' value='always'>";f+="<param name='quality' value='high'>";f+="<param name='movie' value='"+a+"'>";f+="<param name='bgcolor' value='#ffffff'>";f+="<param name='wmode' value='transparent'>";f+="<param name='flashvars' value='"+g+"'>";f+="<embed src='"+a+"' flashvars='"+g+"' quality='high' bgcolor='#FFFFFF' wmode='transparent' width='"+b+"' height='"+d+"' name='"+c+"' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer'>";f+="</object>";document.write(f)}function getMovie(a){if(navigator.appName.indexOf("Microsoft")!=-1){return window[a]}else{return document[a]}}var areaUID="中国|1,安徽|23,福建|16,甘肃|6,广东|7,广西|17,贵州|24,海南|21,河北|25,黑龙江|2,河南|30,湖北|15,湖南|26,江苏|18,江西|31,吉林省|9,辽宁|19,内蒙古|22,宁夏|20,青海|11,山东|8,山西|10,陕西|27,四川|32,新疆|12,西藏|13,云南|28,浙江|29,北京|131,天津|332,石家庄|150,唐山|265,秦皇岛|148,邯郸|151,邢台|266,保定|307,张家口|264,承德|207,沧州|149,廊坊|191,衡水|208,太原|176,大同|355,阳泉|357,长治|356,晋城|290,朔州|237,晋中|238,运城|328,忻州|367,临汾|368,吕梁|327,呼和浩特|321,包头|229,乌海|123,赤峰|297,通辽|64,鄂尔多斯|283,呼伦贝尔|61,巴彦淖尔|169,乌兰察布|168,兴安盟|62,锡林郭勒盟|63,阿拉善盟|230,沈阳|58,大连|167,鞍山|320,抚顺|184,本溪|227,丹东|282,锦州|166,营口|281,阜新|59,辽阳|351,盘锦|228,铁岭|60,朝阳|280,葫芦岛|319,长春|53,吉林市|55,四平|56,辽源|183,通化|165,白山|57,松原|52,白城|51,延边朝鲜族自治州|54,哈尔滨|48,齐齐哈尔|41,鸡西|46,鹤岗|43,双鸭山|45,大庆|50,伊春|40,佳木斯|42,七台河|47,牡丹江|49,黑河|39,绥化|44,大兴安岭地区|38,上海|289,南京|315,无锡|317,徐州|316,常州|348,苏州|224,南通|161,连云港|347,淮安|162,盐城|223,扬州|346,镇江|160,泰州|276,宿迁|277,杭州|179,宁波|180,温州|178,嘉兴|334,湖州|294,绍兴|293,金华|333,衢州|243,舟山|245,台州|244,丽水|292,合肥|127,芜湖|129,蚌埠|126,淮南|250,马鞍山|358,淮北|253,铜陵|337,安庆|130,黄山|252,滁州|189,阜阳|128,宿州|370,巢湖|251,六安|298,亳州|188,池州|299,宣城|190,福州|300,厦门|194,莆田|195,三明|254,泉州|134,漳州|255,南平|133,龙岩|193,宁德|192,南昌|163,景德镇|225,萍乡|350,九江|349,新余|164,鹰潭|279,赣州|365,吉安|318,宜春|278,抚州|226,上饶|364,济南|288,青岛|236,淄博|354,枣庄|172,东营|174,烟台|326,潍坊|287,济宁|286,泰安|325,威海|175,日照|173,莱芜|124,临沂|234,德州|372,聊城|366,滨州|235,菏泽|353,郑州|268,开封|210,洛阳|153,平顶山|213,安阳|267,鹤壁|215,新乡|152,焦作|211,濮阳|209,许昌|155,漯河|344,三门峡|212,南阳|309,商丘|154,信阳|214,周口|308,驻马店|269,武汉|218,黄石|311,十堰|216,宜昌|270,襄樊|156,鄂州|122,荆门|217,孝感|310,荆州|157,黄冈|271,咸宁|362,随州|371,恩施土家族苗族自治州|373,仙桃|1713,潜江|1293,天门|2654,神农架林区|2734,长沙|158,株洲|222,湘潭|313,衡阳|159,邵阳|273,岳阳|220,常德|219,张家界|312,益阳|272,郴州|275,永州|314,怀化|363,娄底|221,湘西土家族苗族自治州|274,广州|257,韶关|137,深圳|340,珠海|140,汕头|303,佛山|138,江门|302,湛江|198,茂名|139,肇庆|338,惠州|301,梅州|141,汕尾|339,河源|200,阳江|199,清远|197,东莞|119,中山|187,潮州|201,揭阳|259,云浮|258,南宁|261,柳州|305,桂林|142,梧州|304,北海|295,防城港|204,钦州|145,贵港|341,玉林|361,百色|203,贺州|260,河池|143,来宾|202,崇左|144,海口|125,三亚|121,五指山|1644,琼海|2358,儋州|1215,文昌|2758,万宁|1216,东方|2634,定安|1214,屯昌|1641,澄迈|2757,临高|2033,白沙黎族自治|2359,昌江黎族自治|1642,乐东黎族自治|2032,陵水黎族自治|1643,保亭黎族苗族自治|1217,琼中黎族苗族自治|2031,重庆|132,成都|75,自贡|78,攀枝花|81,泸州|331,德阳|74,绵阳|240,广元|329,遂宁|330,内江|248,乐山|79,南充|291,眉山|77,宜宾|186,广安|241,达州|369,雅安|76,巴中|239,资阳|242,阿坝藏族羌族自治州|185,甘孜藏族自治州|73,凉山彝族自治州|80,贵阳|146,六盘水|147,遵义|262,安顺|263,铜仁地区|205,黔西南布依族苗族自治州|343,毕节地区|206,黔东南苗族侗族自治州|342,黔南布依族苗族自治州|306,昆明|104,曲靖|249,玉溪|106,保山|112,昭通|336,丽江|114,临沧|110,楚雄彝族自治州|105,红河哈尼族彝族自治州|107,文山壮族苗族自治州|177,普洱|108,西双版纳傣族自治州|109,大理白族自治州|111,德宏傣族景颇族自治州|116,怒江傈僳族自治州|113,迪庆藏族自治州|115,拉萨|100,昌都地区|99,山南地区|97,日喀则地区|102,那曲地区|101,阿里地区|103,林芝地区|98,西安|233,铜川|232,宝鸡|171,咸阳|323,渭南|170,延安|284,汉中|352,榆林|231,安康|324,商洛|285,兰州|36,嘉峪关|33,金昌|34,白银|35,天水|196,武威|118,张掖|117,平凉|359,酒泉|37,庆阳|135,定西|136,陇南|256,临夏回族自治州|182,甘南藏族自治州|247,西宁|66,海东地区|69,海北藏族自治州|67,黄南藏族自治州|70,海南藏族自治州|68,果洛藏族自治州|72,玉树藏族自治州|71,海西蒙古族藏族自治州|65,银川|360,石嘴山|335,吴忠|322,固原|246,中卫|181,乌鲁木齐|92,克拉玛依|95,吐鲁番地区|89,哈密地区|91,昌吉回族自治州|93,博尔塔拉蒙古自治州|88,巴音郭楞蒙古自治州|86,阿克苏地区|85,克孜勒苏柯尔克孜自治州|84,喀什地区|83,和田地区|82,伊犁哈萨克自治州|90,塔城地区|94,阿勒泰地区|96,石河子|770,阿拉尔|731,图木舒克|792,五家渠|789,香港特別行政区|2912,澳门特別行政区|2911".split(",");var AID=[];(function(){for(var c=0;c<areaUID.length;c++){var b=areaUID[c].split("|");AID[b[0]]=b[1]}})();if(AID["中国"]!=null){AID["全国"]=AID["中国"]}if(typeof console=="undefined"){var console={log:function(){}}}function initPage(){initData();adjustPage();bind();switchCity(curCIndex);window.sbw_sugg_0=new bdMapSuggest({inputid:"start_sta",cityid:"subConfig[curCIndex].ccode",closeB:1,qType:3,offset:[1,0]});window.sbw_sugg_1=new bdMapSuggest({inputid:"end_sta",cityid:"subConfig[curCIndex].ccode",closeB:1,qType:3,offset:[1,0]});if(Fe.Browser.ie){document.body.className="ie"+Fe.Browser.ie}}function initData(){window.curCIndex=0;window.subConfig=[{cname:"北京市",cename:"beijing",ccode:AID["北京"],cpre:"bj",xml:"data/sw_beijing.xml?v=20110121",trans:trans_bj,thumbsrc:"images/thumb_bj.png",printsrc:"images/print_bj.png"},{cname:"上海市",cename:"shanghai",ccode:AID["上海"],cpre:"shh",xml:"data/sw_shanghai.xml?v=20110105",trans:trans_shh,thumbsrc:"images/thumb_shh.png",printsrc:"images/print_shh.png",cxfDis:0},{cname:"广州市",cename:"guangzhou",ccode:AID["广州"],cpre:"gzh",xml:"data/sw_guangzhou.xml?v=20110105",trans:trans_gzh,thumbsrc:"images/thumb_gzh.png",printsrc:"images/print_gzh.png"}];window.ielem2Unfold=[];window.telem2Unfold=[];window.baseUrl="../";var d=window.location.search;var f=0;if(d){var a=d.substring(1).split("&");for(var c=0,b=a.length;c<b;c++){if(a[c].match(/^c=([a-z]+)$/)){f=a[c].match(/c=([a-z]+)/)[1]}}for(var c=0,b=subConfig.length;c<b;c++){if(subConfig[c].cename==f){curCIndex=c;break}}}switchCity(curCIndex)}function getClientSize(){if(window.innerHeight){return{width:window.innerWidth,height:window.innerHeight}}else{if(document.documentElement&&document.documentElement.clientHeight){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}else{return{width:document.body.clientWidth,height:document.body.clientHeight}}}}function adjustPage(){var b=parseInt(getClientSize().height)-66;b=b>0?b:0;Fe.G("sbw_map").style.height=Fe.G("sbw_main").style.height=b+"px";var d=parseInt(getClientSize().width)-263;d=d>0?d:0;Fe.G("sbw_map").style.width=d+"px";var c=parseInt(getClientSize().height)-217;if(Fe.G("trans_description")){c=c>0?c:0;Fe.G("trans_description").style.height=c+"px"}if(Fe.G("routes_detail")){var a=c-30;a=a>0?a:0;Fe.G("routes_detail").style.height=a+"px"}}function bind(){Fe.on(Fe.G("sbw_map"),"mousewheel",function(a){var a=a||window.event;var b=a.wheelDelta;if(b>0){if(_getFlaObj()){_getFlaObj().NS_SW_doMouseWheel(1)}}else{if(_getFlaObj()){_getFlaObj().NS_SW_doMouseWheel(-1)}}});if(window.addEventListener){Fe.G("sbw_map").addEventListener("DOMMouseScroll",function(a){if(a.detail>0){if(_getFlaObj()){_getFlaObj().NS_SW_doMouseWheel(-1)}}else{if(_getFlaObj()){_getFlaObj().NS_SW_doMouseWheel(1)}}},false)}Fe.on(Fe.G("print"),"click",showPrint)}function switchCity(c){if(typeof c=="undefined"||c<0||c>2){return}curCIndex=c;var b=Fe.G("city_tab").children;for(var d=0,a=Fe.G("city_tab").children.length;d<a;d++){Fe.rc(b[d],"sel")}Fe.ac(Fe.G("city_tab").children[c],"sel");document.title="百度地图 - "+subConfig[curCIndex].cname+"轨道交通图";if(_getFlaObj()&&_getFlaObj().NS_SW_setSearchResult){_getFlaObj().NS_SW_setSearchResult(null)}if(_getFlaObj()){setTimeout(function(){if(_getFlaObj()&&_getFlaObj().NS_SW_setCity){_getFlaObj().NS_SW_setCity(getSubXml())}},100)}NS_SW_clearSearchResult();setTimeout(NS_SW_clearSearchResult,200);setTimeout(loadPrintImage,2000);return false}function loadPrintImage(){if(!Fe.G("print_img_"+subConfig[curCIndex].cpre)){Fe.G("print_src").innerHTML+="<img id='print_img_"+subConfig[curCIndex].cpre+"' src='"+subConfig[curCIndex].printsrc+"' />"}var c=Fe.G("print_src").getElementsByTagName("img");for(var b=0,a=c.length;b<a;b++){if(c[b].id=="print_img_"+subConfig[curCIndex].cpre){c[b].className="forPrint"}else{c[b].className=""}}}function SBWUnload(){NS_SW_clearSearchResult()}function preventDefault(a){a=a||window.event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}curSLines=[];curReqUrl="";function q(){if(Fe.G("start_sta").value==""){Fe.G("start_sta").focus()}else{if(Fe.G("end_sta").value==""){Fe.G("end_sta").focus()}else{_q();Fe.G("result_container").innerHTML="<p class='tipsInfo'>正在搜索，请稍候...</p>"}}return false}function getUID(d){var a="";var f=getCurrentCityCode();var g=null;if(f==131){g=wayname_beijing}if(f==289){g=wayname_shanghai}if(f==257){g=wayname_guangzhou}for(var b in g){for(var c in g[b]){if(c==d){a=g[b][c]}}}return a}function _q(opts,src){if(!opts){var opts={}}src=src||0;req=new Fe.Ajax();req.onsuccess=function(httpReq){if(httpReq.readyState==4&&httpReq.status==200){var json=null;try{eval("json="+httpReq.responseText)}catch(e){}if(!json||json&&!json.result||json.result&&json.result.type!=14||json&&!json.content||json&&json.result&&json.result.error!=0){Fe.G("result_container").innerHTML="<p class='tipsInfo'>没有找到“"+encodeHTML(Fe.G("start_sta").value)+"”和“"+encodeHTML(Fe.G("end_sta").value)+"”之间的路线。</p>";_getFlaObj().NS_SW_setSearchResult();return}curSLines.length=0;_render(json);_bind();_qd()}};req.onfailure=function(){Fe.G("result_container").innerHTML="<p class='tipsInfo'>网络忙，请稍后再试</p>";_getFlaObj().NS_SW_setSearchResult()};var sy=0;if(Fe.G("type1")&&Fe.G("type1").checked){sy=0}if(Fe.G("type2")&&Fe.G("type2").checked){sy=2}curSLines._sy=sy;var sn="";if(opts.sid){sn="0$$"+opts.sid+"$$$$"}else{if(opts.sname){sn="0$$"+getUID(opts.sname)+"$$$$"+encodeURIComponent(opts.sname)+"$$";Fe.G("start_sta")._v=opts.sname}else{sn="0$$"+getUID(Fe.G("start_sta").value)+"$$$$"+encodeURIComponent(Fe.G("start_sta").value)+"$$";Fe.G("start_sta")._v=Fe.G("start_sta").value}}var en="";if(opts.eid){en="0$$"+opts.eid+"$$$$"}else{if(opts.ename){en="0$$"+getUID(opts.ename)+"$$$$"+encodeURIComponent(opts.ename)+"$$";Fe.G("end_sta")._v=opts.ename}else{en="0$$"+getUID(Fe.G("end_sta").value)+"$$$$"+encodeURIComponent(Fe.G("end_sta").value)+"$$";Fe.G("end_sta")._v=Fe.G("end_sta").value}}if(!opts.re){var cc=getCurrentCityCode();curReqUrl=window.baseUrl+"?newmap=1&qt=bts&osrc="+src+"&ie=utf-8&f=[1,12,13]&c="+cc+"&sn="+sn+"&en="+en+"&m=sbw"}if(!curReqUrl){return}var t=new Date().getTime();req.request(curReqUrl+"&sy="+sy+"&t="+t,null)}function _render(s){if(!s||s&&!s.content){return}ielem2Unfold=[];telem2Unfold=[];var o=_getSchemeIndex(s.content);var n=s.content[o];if(!n){Fe.G("result_container").innerHTML="<p class='tipsInfo'>没有找到“"+encodeHTML(Fe.G("start_sta").value)+"”和“"+encodeHTML(Fe.G("end_sta").value)+"”之间的路线。</p>";_getFlaObj().NS_SW_setSearchResult();return}var p=['<div id="trans_stra"><strong>换乘策略</strong>'];p.push("<span><label"+(s.result.sy==0?" class='selected'":"")+' for="type1">');p.push('<input name="type" id="type1" type="radio" '+(s.result.sy==0?"checked='checked'":"")+"/>较快捷</label>");p.push("&nbsp;&nbsp;&nbsp;");p.push("<label"+(s.result.sy==2?" class='selected'":"")+' for="type2">');p.push('<input name="type" id="type2" type="radio" '+(s.result.sy==2?"checked='checked'":"")+"/>少换乘</label></span></div>");var a=subConfig[curCIndex].cpre;p.push('<div id="trans_description" class="'+a+'">');p.push('<table><tr><td class="title">&nbsp;乘车方案</td>');p.push('<td style="text-align:right"><input id="btn_uf" type="button" /></td></tr></table>');p.push('<div id="routes_detail"><table>');var f=0;var h=0;var b=0;var j=0;for(var g=0,d=n.stops.length;g<d;g++){if(g<d-1&&n.lines[0][g]){curSLines[g]={luid:n.lines[0][g].uid,lname:n.lines[0][g].name};j+=n.lines[0][g].distance;if(curCIndex==1&&n.lines[0][g].name&&n.lines[0][g].name.indexOf("磁悬浮")==0){subConfig[curCIndex].cxfDis=n.lines[0][g].distance}if(g==d-2){curSLines[g].distance=j}var m=n.lines[0][g].name.replace("地铁","").replace(/\(.+\)$/,"");if(n.lines[0][g].name.indexOf("航中路")>-1){m="10号线(航中路-新江湾城)"}else{if(n.lines[0][g].name.indexOf("虹桥火车站")>-1){m="10号线(新江湾城-虹桥火车站）"}else{if(n.lines[0][g].name.indexOf("嘉定北")>-1){m="11号线(江苏路-嘉定北)"}else{if(n.lines[0][g].name.indexOf("安亭")>-1){m="11号线(江苏路-安亭)"}}}}var f=_getLid(n.lines[0][g].name)}p.push('<tr><th class="np ldot">');p.push('<div class="dot_c">');if(g==0){p.push('<div class="ldot l'+f+'"></div>');p.push('<div class="lvl fst lvl'+f+'"></div>')}else{if(g>0&&g<d-1){p.push('<div class="ldot ln"></div>');p.push('<div class="lvl lst lvl'+h+'"></div>');p.push('<div class="lvl fst lvl'+f+'"></div>')}else{p.push('<div class="ldot l'+f+'"></div>');p.push('<div class="lvl lst lvl'+h+'"></div>')}}p.push("</div>");p.push("</th>");p.push('<th class="stop_name">'+(g==0?n.stops[g].getOn.name:n.stops[g].getOff.name)+"</th>");if(g==0){p.push('<th class="dtime_col"><span id="arr_time_title">到达时间</span></th>');ielem2Unfold.push("arr_time_title")}else{p.push('<th class="dtime_col"><span id="arr_time_'+(g-1)+'" class="seg_ttime"></span></th>');ielem2Unfold.push("arr_time_"+(g-1))}p.push("</tr>");if(g>0&&g<=d-1){if(n.lines[0][g-1]&&curSLines[g-1]){curSLines[g-1].suid=n.stops[g-1].getOn.uid;curSLines[g-1].sname=n.stops[g-1].getOn.name;curSLines[g-1].euid=n.stops[g].getOff.uid;curSLines[g-1].ename=n.stops[g].getOff.name;if(g<d-1){if(subConfig[curCIndex].trans&&typeof subConfig[curCIndex].trans[n.stops[g].getOff.name]=="number"){curSLines[g-1].wtime=subConfig[curCIndex].trans[n.stops[g].getOff.name]}else{if(subConfig[curCIndex].trans&&subConfig[curCIndex].trans[n.stops[g].getOff.name][_getLid(n.lines[0][g-1].name)+"-"+_getLid(n.lines[0][g].name)]){curSLines[g-1].wtime=subConfig[curCIndex].trans[n.stops[g].getOff.name][_getLid(n.lines[0][g-1].name)+"-"+_getLid(n.lines[0][g].name)]}}curSLines[g-1].distance=curSLines[g-1].wtime*90}}}if(g<d-1&&n.lines[0]){p.push('<tr><td class="lvl lvl'+f+'"></td>');p.push('<td colspan="2">');if(g>0){var k=curSLines[g-1].distance||0;var r=curSLines[g-1].wtime||0;p.push('<span class="dis_time">换乘距离'+k+"米 | 步行时间 "+r+"分钟</span><br />")}p.push('<span class="title rn_'+f+'">'+m+"</span>");p.push("("+n.lines[0][g].station_num+"站)");p.push('<table class="d_stop_time" id="detail_stops_'+g+'"><tbody></tbody></table>');telem2Unfold.push("detail_stops_"+g);p.push("</td>");b+=n.lines[0][g].station_num}h=f}p.push("</table>");p.push('<div id="rinfo">途径 <span>'+b+'站</span><span class="vl">|</span>');p.push('预计时间 <span id="totalTime">计算中...</span><span class="vl">|</span>');p.push("票价 <span>"+_calPrice(j)+"元</span></div>");p.push('<div id="tips">百度提醒您：以上乘车方案仅供您参考，具体情况请以实际的地铁信息为准。</div>');p.push('<a href="javascript:void(0)" style="color:#7777cc;padding-bottom:10px;zoom:1" onclick="return sendFeedback()">结果有错误？</a>');p.push("</div></div>");Fe.G("result_container").innerHTML=p.join("");adjustPage()}function sendFeedback(){window.open("../feedback.html?newmap=1&word="+encodeURIComponent("从"+Fe.G("start_sta")._v+"到"+Fe.G("end_sta")._v));return false}function _bind(){Fe.on(Fe.G("type1"),"click",function(){if(curSLines&&curSLines._sy==0){return}_q({re:true})});Fe.on(Fe.G("type2"),"click",function(){if(curSLines&&curSLines._sy==2){return}_q({re:true})});Fe.on(Fe.G("btn_uf"),"click",function(){var c=Fe.G("btn_uf");if(!c._unfolded){Fe.ac(c,"fold");c._unfolded=true;for(var b=0,a=ielem2Unfold.length;b<a;b++){if(Fe.G(ielem2Unfold[b])){Fe.G(ielem2Unfold[b]).style.display="inline"}}for(var b=0,a=telem2Unfold.length;b<a;b++){if(Fe.G(telem2Unfold[b])){Fe.G(telem2Unfold[b]).style.display=Fe.Browser.ie?"block":"table"}}addStat(STAT_SUB_UNFOLD)}else{Fe.rc(c,"fold");c._unfolded=false;for(var b=0,a=ielem2Unfold.length;b<a;b++){if(Fe.G(ielem2Unfold[b])){Fe.G(ielem2Unfold[b]).style.display="none"}}for(var b=0,a=telem2Unfold.length;b<a;b++){if(Fe.G(telem2Unfold[b])){Fe.G(telem2Unfold[b]).style.display="none"}}}})}function _qd(){var i=0;for(var i=0,l=curSLines.length;i<l;i++){(function(){var index=i;var iluid=curSLines[index].luid;setTimeout(function(){var req=new Fe.Ajax();req.onsuccess=function(httpReq){if(httpReq.readyState==4&&httpReq.status==200){var json=null;try{eval("json="+httpReq.responseText)}catch(e){}if(!json||!json.content||!json.content[0]){return}var c=json.content[0];if(curSLines[index]){curSLines[index].stations=[];var j=0;var _prefix=subConfig[curCIndex].cname+"|"+curSLines[index].lname.replace(/\(.+\)$/,"")+"|";if(subConfig[curCIndex].cname.indexOf("上海")>-1){if(curSLines[index].lname.indexOf("10")>-1){if(curSLines[index].lname=="地铁10号线(航中路-新江湾城)"){curSLines[index].lname="地铁10号线(新江湾城-航中路)"}if(curSLines[index].lname=="地铁10号线(虹桥火车站-新江湾城)"){curSLines[index].lname="地铁10号线(新江湾城-虹桥火车站)"}var _prefix=subConfig[curCIndex].cname+"|"+curSLines[index].lname+"|"}if(curSLines[index].lname.indexOf("11")>-1){if(curSLines[index].lname=="地铁11号线(嘉定北-江苏路)"){curSLines[index].lname="地铁11号线(江苏路-嘉定北)"}if(curSLines[index].lname=="地铁11号线(安亭-江苏路)"){curSLines[index].lname="地铁11号线(江苏路-安亭)"}var _prefix=subConfig[curCIndex].cname+"|"+curSLines[index].lname+"|"}}for(j=0,l=c.stations.length;j<l;j++){var sta={name:c.stations[j].name};if(j==0){sta.time=_getFlaObj().NS_SW_getInterval(_prefix+curSLines[index].sname,_prefix+c.stations[j].name)}else{sta.time=curSLines[index].stations[j-1].time+_getFlaObj().NS_SW_getInterval(_prefix+c.stations[j-1].name,_prefix+c.stations[j].name)}curSLines[index].stations.push(sta)}var t=0;if(j==0){t=_getFlaObj().NS_SW_getInterval(_prefix+curSLines[index].sname,_prefix+curSLines[index].ename)}else{t=curSLines[index].stations[j-1].time+_getFlaObj().NS_SW_getInterval(_prefix+c.stations[j-1].name,_prefix+curSLines[index].ename)}if(Fe.G("arr_time_"+index)){Fe.G("arr_time_"+index).innerHTML=t+"分钟"}curSLines[index].ttime=t}if(Fe.G("detail_stops_0")&&index==0){for(var j=0,l=curSLines[0].stations.length;j<l;j++){var tr=document.createElement("tr");var tdstop=document.createElement("td");tdstop.className="dstop";tdstop.appendChild(document.createTextNode(curSLines[0].stations[j].name));var tdtime=document.createElement("td");tdtime.className="dtime";tdtime.appendChild(document.createTextNode(curSLines[0].stations[j].time+"分钟"));tr.appendChild(tdstop);tr.appendChild(tdtime);Fe.G("detail_stops_0").children[0].appendChild(tr)}}if(c.stations[0]){curSLines[index].nname=c.stations[0].name}else{curSLines[index].nname=curSLines[index].ename}var setToFla=true;for(var j=0,ll=curSLines.length;j<ll;j++){if(!curSLines[j].nname){setToFla=false;break}}if(setToFla){for(var j=1,l=curSLines.length;j<l;j++){if(Fe.G("detail_stops_"+j)){for(var k=0,ll=curSLines[j].stations.length;k<ll;k++){var tr=document.createElement("tr");var tdstop=document.createElement("td");tdstop.className="dstop";tdstop.appendChild(document.createTextNode(curSLines[j].stations[k].name));var tdtime=document.createElement("td");tdtime.className="dtime";curSLines[j].stations[k].time=curSLines[j].stations[k].time+curSLines[j-1].ttime+curSLines[j-1].wtime;tdtime.appendChild(document.createTextNode(curSLines[j].stations[k].time+"分钟"));tr.appendChild(tdstop);tr.appendChild(tdtime);Fe.G("detail_stops_"+j).children[0].appendChild(tr)}}curSLines[j].ttime=curSLines[j].ttime+curSLines[j-1].ttime+curSLines[j-1].wtime;if(Fe.G("arr_time_"+j)){Fe.G("arr_time_"+j).innerHTML=curSLines[j].ttime+"分钟"}}if(curSLines[curSLines.length-1]){if(Fe.G("totalTime")){Fe.G("totalTime").innerHTML=curSLines[curSLines.length-1].ttime+"分钟"}curSLines[curSLines.length-1].time=curSLines[curSLines.length-1].ttime}_setResult4Fla()}}};var cc=getCurrentCityCode();var t=new Date().getTime();var reqUrl=window.baseUrl+"?newmap=1&qt=bsl&bsltp=3&uid="+iluid+"&c="+cc+"&ie=utf-8&suid="+curSLines[index].suid+"&euid="+curSLines[index].euid+"&t="+t;req.request(reqUrl,null)},i*50)})()}}function getCurrentCityCode(){return subConfig[curCIndex]?subConfig[curCIndex].ccode:subConfig[0].ccode}function getSubXml(){return subConfig[curCIndex]?subConfig[curCIndex].xml:subConfig[0].xml}function _calPrice(b){var f=0;switch(curCIndex){case 0:var c=0;for(var c=0,a=curSLines.length;c<a;c++){if(curSLines[c].lname.indexOf("机场")>-1){f+=25}}if(c>1&&f==25){f=27}else{if(f==0){f=2}}break;case 1:var d=false;for(var c=0,a=curSLines.length;c<a;c++){if(curSLines[c].lname.indexOf("磁悬浮")>-1){d=true;b=b-subConfig[curCIndex].cxfDis}}if(b>0&&b<=6000){f=3}else{if(b>6000){f=3+Math.ceil((b-6000)/10000)}}if(f>9){f=9}if(d){f+=50}break;case 2:if(b>0&&b<=4000){f=2}else{if(b>4000&&b<=12000){f=2+Math.ceil((b-4000)/4000)}else{if(b>12000&&b<=24000){f=4+Math.ceil((b-12000)/6000)}else{if(b>24000){f=6+Math.ceil((b-24000)/8000)}}}}break;default:break}return f}function _setResult4Fla(){var c=[];var b=0;for(var b=0,a=curSLines.length;b<a;b++){c[b]={};c[b].lid=subConfig[curCIndex].cname+"|"+curSLines[b].lname.replace(/\(.+\)$/,"");if(subConfig[curCIndex].cname.indexOf("上海")>-1){if(curSLines[b].lname.indexOf("10")>-1){c[b].lid=subConfig[curCIndex].cname+"|"+curSLines[b].lname}if(curSLines[b].lname.indexOf("11")>-1){c[b].lid=subConfig[curCIndex].cname+"|"+curSLines[b].lname}}c[b].sid=c[b].lid+"|"+curSLines[b].sname;c[b].eid=c[b].lid+"|"+curSLines[b].ename;if(b<a-1){c[b].time=curSLines[b].wtime}else{c[b].time=curSLines[b].ttime;c[b].price=_calPrice(curSLines[b].distance)}c[b].distance=curSLines[b].distance;c[b].nid=c[b].lid+"|"+curSLines[b].nname}_getFlaObj().NS_SW_setSearchResult(c)}function _getLid(a){var c="";var b=a.replace("地铁","").replace(/\(.+\)$/,"");if(b.match(/\d+/)&&b.match(/\d+/).length>0){c=b.match(/\d+/)[0]}switch(curCIndex){case 0:if(b.indexOf("八通")>-1){c="8t"}if(b.indexOf("亦庄")>-1){c="yz"}if(b.indexOf("大兴")>-1){c="dx"}if(b.indexOf("昌平")>-1){c="cp"}if(b.indexOf("房山")>-1){c="fs"}else{if(b.indexOf("机场")>-1){c="air"}}break;case 1:if(b.indexOf("磁悬浮")>-1){c="cxf"}break;case 2:if(b.indexOf("支线")>-1||b.indexOf("北延段")>-1){c="zx"}if(b.indexOf("广佛")>-1){c="gf"}else{if(b.indexOf("apm")>-1){c="apm"}}break;default:break}return c}function _getSchemeIndex(k){var d=-1;for(var f=0,a=k.length;f<a;f++){if(k[f].stops){var g=k[f].stops;d=f;for(var b=1,h=g.length-1;b<h;b++){if(g[b]&&g[b].getOff.name!=g[b].getOn.name){d=-1;break}}if(d!=-1){break}}}return d}var STAT_SUGG_COUNT=6;var STAT_SUB_UNFOLD=11;var STAT_SUB_PRINT=60;function addStat(a){if(!a){return}if(Fe.G("statImg")){setTimeout(function(){Fe.G("statImg").src="images/transparent.gif?newmap=1&t="+(new Date()).getTime()+"&code="+a},50)}}window.onerror=function(){return false};function encodeHTML(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function NS_SW_setStartStation(a){if(a.split("|")[2]){if(window.sbw_sugg_0){window.sbw_sugg_0.setValue(a.split("|")[2])}else{Fe.G("start_sta").value=a.split("|")[2]}}else{if(window.sbw_sugg_0){window.sbw_sugg_0.setValue(a)}else{Fe.G("start_sta").value=a}}Fe.G("end_sta").value="";Fe.G("result_container").innerHTML=""}function NS_SW_setEndStation(a){if(a.split("|")[2]){if(window.sbw_sugg_1){window.sbw_sugg_1.setValue(a.split("|")[2])}else{Fe.G("end_sta").value=a.split("|")[2]}}else{if(window.sbw_sugg_1){window.sbw_sugg_1.setValue(a)}else{Fe.G("end_sta").value=a}}Fe.G("result_container").innerHTML=""}function NS_SW_openStationDetail(j){if(!j){return}var d=j.split("|")[0];var h=j.split("|")[1];var a=j.split("|")[2];var g="";for(var c=0,b=curSLines.length;c<b;c++){var f=curSLines[c].lname.replace(/\(.+\)/,"");var k=getCurrentCityCode();if(k==289){if(curSLines[c].lname.indexOf("10")>-1){var f=curSLines[c].lname}if(curSLines[c].lname.indexOf("11")>-1){var f=curSLines[c].lname}}if(f==h){if(curSLines[c].sname==a){g=curSLines[c].suid}else{if(curSLines[c].ename==a){g=curSLines[c].euid}}}}if(!g){return}window.open(window.baseUrl+"?newmap=1&s="+encodeURIComponent("inf&it=3&newmap=1&uid="+g+"&c="+getCurrentCityCode()))}function NS_SW_doSearch(a,b){if(!a||!b){return}NS_SW_setStartStation(a);NS_SW_setEndStation(b);if(a.split("|")[2]&&b.split("|")[2]){_q({sname:a.split("|")[2],ename:b.split("|")[2]},1)}}function NS_SW_swfLoaded(){_getFlaObj().NS_SW_setCity(getSubXml())}function _getFlaObj(){return getMovie("swfSubway")}function NS_SW_clearSearchResult(){Fe.G("start_sta").value=Fe.G("start_sta")._v="";Fe.G("end_sta").value=Fe.G("end_sta")._v="";window.curSLines=[];window.curReqUrl="";Fe.G("result_container").innerHTML=""}Object.extend=function(a,c){for(var b in c){a[b]=c[b]}return a};Object.extend(Object,{clone:function(a){return Object.extend({},a)}});var Class=function(){var a=function(){this.initialize.apply(this,arguments)};for(var b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c.prototype){a.prototype[d]=c.prototype[d]}}a.child=function(){return new Class(this)};a.extend=function(f){for(var g in f){a.prototype[g]=f[g]}};return a};Function.prototype.bindAsEventListener=function(b){var a=this;return function(c){a.call(b,c||window.event)}};function proxy(){var c=[];for(var b=0,a=arguments.length;b<a;b++){c[b]=arguments[b]}var d=c[0];c.shift();return function(){d.apply(null,c)}}function BMAddEvent(c,b,a){if(typeof(window.attachEvent)!="undefined"){c.attachEvent("on"+b,a)}else{if(window.addEventListener){c.addEventListener(b,a,true)}}}var bdMapSuggest=new Class();bdMapSuggest.prototype={GE:function(a){return document.getElementById(a)},C:function(a){return document.createElement(a)},clktr:function(d){var g=false;if(d.id){var c=d.id.split("__")[2];if((this.qType==0||this.qType==2)&&c>-1&&this.SD!=null){var a=this.SD.s[c];addStat(STAT_SUGG_DETAIL,{userinput:document.getElementById("PoiSearch").value,suggtext:d.cells[2].childNodes[0].nodeValue});if(a.split("$")[3]!=""&&!!this.callback){if(this._sq){addStat(STAT_SUGG_COUNT_WHAT)}else{addStat(STAT_SUGG_COUNT)}g=true;this.setValue(d.cells[2].childNodes[0].nodeValue);if(typeof(this.callback)=="function"){if(this.qType==0||this.qType==2){this.callback(d.cells[3].innerHTML,true)}else{this.callback(d.cells[2].childNodes[0].nodeValue,true)}}}if(a.split("$")[3]!=""){g=true;this.setValue(d.cells[2].childNodes[0].nodeValue)}else{addStat(STAT_SUGG_COUNT);g=true;this.setValue(d.cells[2].childNodes[0].nodeValue);var b="";try{b=d.cells[3].childNodes[0].nodeValue+d.cells[2].childNodes[0].nodeValue}catch(f){b=d.cells[3].innerHTML+d.cells[2].innerHTML}if(typeof(this.callback)=="function"){this.callback(d.cells[3].innerHTML,false)}setTimeout(proxy(this.sendQuery.bindAsEventListener(this),b),200)}}}if(!g){this.cs();this.sub(d.cells[2].childNodes[0].nodeValue)}},sub:function(a){this.I.value=a},csc:function(){this.cs();this.I.blur();this.I.focus();if(navigator.cookieEnabled&&Fe.Cookie.get(this.cookieN)!="1"){Fe.Cookie.set(this.cookieN,"1",{domain:"map.baidu.com",expires:946080000000})}addStat(STAT_SUGG_CLOSE);if(typeof(this.closeSuggest)=="function"){this.closeSuggest()}},trMouseOver:function(a){this.ct();a.className="mo";this.mouseOnSug=true},trMouseDown:function(){this.E=true;if(!this.isIE){e.stopPropagation();return false}},trOnclick:function(a,b){this.clktr(a,b);this.I.focus()},setSug:function(){if(typeof(this.SD)!="object"||typeof(this.SD.s)=="undefined"){return}var tab=this.C("table");with(tab){id="bdmap_sugt_"+this.sgId;style.backgroundColor="#fff";cellSpacing=0;cellPadding=1;style.cursor="default"}var tb=this.C("tbody");tab.appendChild(tb);var regStr=this.I.value.replace(/\|/ig,"[|]");var reExp=new RegExp(regStr,"g");var reExp1="<b>"+this.I.value+"</b>";var ifShowFLg=false;for(var i=0;i<this.SD.s.length;i++){if(this.SD.t==3&&(this.SD.s[i].split("$")[4].split(";")[0]!=eval(this.cityId)||this.SD.s[i].split("$")[3]==this.I.value)){continue}ifShowFLg=true;var tr=tb.insertRow(-1);tr.id="tr__"+this.sgId+"__"+i;tr.onmouseover=proxy(this.trMouseOver.bindAsEventListener(this),tr);tr.onmouseout=this.ct.bindAsEventListener(this);tr.onmousedown=this.trMouseDown.bindAsEventListener(this);tr.onclick=proxy(this.trOnclick.bindAsEventListener(this),tr,i);var td=tr.insertCell(-1);var td1=tr.insertCell(-1);var td2=tr.insertCell(-1);var td3=tr.insertCell(-1);td2.style.display="none";td3.style.display="none";var sdwords=this.SD.s[i].split("$");switch(this.SD.t){case 0:td1.style.display="none";var keywordStr="";if(sdwords[3]==""){if(sdwords[2].toLowerCase().indexOf(this.I.value.toLowerCase())>-1){keywordStr=sdwords[2];td.innerHTML=sdwords[2].replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+sdwords[0]+sdwords[1]+"</span>";td3.innerHTML=sdwords[0]+sdwords[1]}else{if(sdwords[1].toLowerCase().indexOf(this.I.value.toLowerCase())>-1||(sdwords[1]+sdwords[2]).toLowerCase().indexOf(this.I.value.toLowerCase())>-1){keywordStr=sdwords[1]+sdwords[2];td.innerHTML=(sdwords[1]+sdwords[2]).replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+sdwords[0]+"</span>";td3.innerHTML=sdwords[0]}else{keywordStr=sdwords[0]+sdwords[1]+sdwords[2];td.innerHTML=(sdwords[0]+sdwords[1]+sdwords[2]).replace(reExp,reExp1);td3.innerHTML=""}}}else{keywordStr=sdwords[3];td.innerHTML=sdwords[3].replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+(sdwords[0]+sdwords[1]).replace(reExp,reExp1)+"</span>";td3.innerHTML=sdwords[0]+sdwords[1]+sdwords[2]}td2.innerHTML=keywordStr;break;case 1:td1.style.display="none";if(sdwords[1]!=""){td.innerHTML=(sdwords[0]+sdwords[1]).replace(reExp,reExp1);td2.innerHTML=sdwords[0]+sdwords[1]}break;case 2:td1.style.display="none";var keywordStr="";if(sdwords[3]==""){if(sdwords[2].toLowerCase().indexOf(this.I.value.toLowerCase())>-1){keywordStr=sdwords[2];td.innerHTML=sdwords[2].replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+sdwords[0]+sdwords[1]+"</span>";td3.innerHTML=sdwords[0]+sdwords[1]}else{if(sdwords[1].toLowerCase().indexOf(this.I.value.toLowerCase())>-1||(sdwords[1]+sdwords[2]).toLowerCase().indexOf(this.I.value.toLowerCase())>-1){keywordStr=sdwords[1]+sdwords[2];td.innerHTML=(sdwords[1]+sdwords[2]).replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+sdwords[0]+"</span>";td3.innerHTML=sdwords[0]}else{keywordStr=sdwords[0]+sdwords[1]+sdwords[2];td.innerHTML=(sdwords[0]+sdwords[1]+sdwords[2]).replace(reExp,reExp1);td3.innerHTML=""}}}else{keywordStr=sdwords[3];td.innerHTML=sdwords[3].replace(reExp,reExp1)+'&nbsp;<span class="spoi1">'+(sdwords[0]+sdwords[1]).replace(reExp,reExp1)+"</span>";td3.innerHTML=sdwords[0]+sdwords[1]+sdwords[2]}td2.innerHTML=keywordStr;break;case 3:td.innerHTML=td2.innerHTML=sdwords[3];td.width=95;var tmpLineArr=sdwords[4].split(";");var lineArr=tmpLineArr[1].split(",");var lineStr="";for(var j=lineArr.length-1;j>=0;j--){lineStr+='<div class="sugg_l_'+tmpLineArr[0]+" sugg_"+tmpLineArr[0]+"_l"+lineArr[j]+'"></div>'}td1.innerHTML=lineStr;td1.width=55;break}}if(this.closeBol==0){var th=tb.insertRow(-1);var td=th.insertCell(-1);td.style.textAlign="right";var oa=this.C("A");oa.style.textDecoration="none";oa.style.color="#0100CC";oa.href="javascript:void(0)";oa.title="关闭";oa.innerHTML="关闭";oa.onclick=this.csc.bindAsEventListener(this);td.appendChild(oa);var td1=th.insertCell(-1);td1.style.display="none";var td2=th.insertCell(-1);td2.style.display="none"}this.S.innerHTML="";this.S.appendChild(tab);this.T=this.GE("bdmap_sugt_"+this.sgId);if(ifShowFLg||(this.SD.t==3&&this.SD.s.length==1&&this.SD.s[0].split("$")[3]==this.I.value)){this.setPos();if(this.GE("noResTip"+this.sgId)){this.GE("noResTip"+this.sgId).style.display="none"}this.ifSubmit=false}else{this.S.style.display="none";if(this.isIE){this.GE("bdmap_sugif_"+this.sgId).style.display="none"}if(this.GE("noResTip"+this.sgId)){var tmpRt=this.GE("noResTip"+this.sgId);var iPos=this.getPos(this.I);tmpRt.style.left=iPos[0]+this.offsetPos[0]+"px";tmpRt.style.top=iPos[1]+this.offsetPos[1]+parseInt(this.I.offsetHeight)+"px";tmpRt.innerHTML=this.nonResTip;tmpRt.style.display=""}this.ifSubmit=true}this.c=-1;this.s3=""},setPos:function(){this.S.style.top=(this.isGecko?this.I.offsetHeight-1:this.I.offsetHeight)+"px";var iPos=this.getPos(this.I);this.S.style.left=iPos[0]+this.offsetPos[0]+"px";this.S.style.top=iPos[1]+this.offsetPos[1]+parseInt(this.I.offsetHeight)+"px";this.S.style.display="block";if(this.I.offsetWidth>=(this.T.offsetWidth+2)){this.T.style.width=(this.I.offsetWidth-2)+"px"}if(this.isIE){var sug_if=this.GE("bdmap_sugif_"+this.sgId);with(sug_if.style){display="";position="absolute";left=iPos[0]+this.offsetPos[0]+"px";top=iPos[1]+this.offsetPos[1]+parseInt(this.I.offsetHeight)+"px";width=this.S.offsetWidth+"px";height=this.S.offsetHeight+"px"}}},resetPos:function(){if(this.S.style.display!="none"){this.setPos()}},ct:function(){var a=this.T.rows;for(var b=0;b<a.length;b++){a[b].className="ml"}},cs:function(){if(this.isIE&&this.GE("bdmap_sugif_"+this.sgId)){this.GE("bdmap_sugif_"+this.sgId).style.display="none"}if(this.S){this.S.style.display="none"}if(this.GE("noResTip"+this.sgId)){this.GE("noResTip"+this.sgId).style.display="none"}this.timer3=0;this.c=-1},cb:function(){var c=true;var d=this.I.value;if(typeof(this.T)!="undefined"&&this.T!=null){var a=this.T.rows;for(var f=0;f<a.length;f++){if(a[f].className=="mo"){if(d==a[f].cells[2].childNodes[0].nodeValue&&!this.mouseOnSug){c=false}}}}if(c&&!this.K&&this.S){if(this.ifSend){this.sendQuery()}else{this.ifSend=true}}},sendQuery:function(qString){if(!!qString){this.queryWord=this.I.value;this.specQuery1=true}else{this.specQuery1=false}var pars="/su?wd="+encodeURIComponent(!qString?this.I.value:qString)+"&cid="+eval(this.cityId)+"&type="+this.qType+"&newmap=1&t="+new Date().getTime();Fe.Ajax.request(pars,this.sugCallBack.bindAsEventListener(this))},sugCallBack:function(originalRequest){if(this.tooFast){return}if(!originalRequest||originalRequest.responseText==""){return}var jsonResults="("+originalRequest.responseText+")";var items=eval(jsonResults);if(typeof(items)=="object"&&typeof(items.s)!="undefined"&&typeof(items.s[0])!="undefined"){var singleRes=false;if(items.s.length==1){switch(items.t){case 0:case 1:case 2:if(items.s[0].replace(/\$/g,"")==this.I.value){singleRes=true}break;case 3:if(items.s[0].split("$")[3]==this.I.value){singleRes=true}break}}if((this.enterQuery||items.t==3)&&singleRes){this.cs();this.SD={};this.enterQuery=false;this.ifSubmit=true}else{this.SD=items;this.setSug()}}else{this.cs();this.SD={};if(this.GE("noResTip"+this.sgId)){var tmpRt=this.GE("noResTip"+this.sgId);var iPos=this.getPos(this.I);tmpRt.style.left=iPos[0]+this.offsetPos[0]+"px";tmpRt.style.top=iPos[1]+this.offsetPos[1]+parseInt(this.I.offsetHeight)+"px";tmpRt.innerHTML=this.nonResTip;tmpRt.style.display=""}this.ifSubmit=true}},setValue:function(a){this.cs();this.ifSend=false;this.I.value=a},f:function(){if(!this.GE(this.sgId)){this.disposeSug();return}var a=this.I.value;if(a==this.s1&&a!=""&&a!=this.s3){if(this.timer2==0){if(navigator.cookieEnabled&&Fe.Cookie.get(this.cookieN)!="1"){this.timer2=setTimeout(this.cb.bindAsEventListener(this),100)}else{this.s3=a}}}else{clearTimeout(this.timer2);this.timer2=0;this.s1=a;if(a==""){this.cs()}if(this.s3!=this.I.value){this.s3=""}}},resetSuggestion:function(){if(this.S.style.display!="none"){setTimeout(function(){this.cs();if(this.SD!=null){this.setSug(this.SD);this.I.focus()}},100)}},keyDownSuggest:function(g){j=g||window.event;this.K=false;var h;if(j.keyCode==27){if(this.isIE){j.returnValue=false}else{j.preventDefault()}this.I.blur();this.I.focus();return}if(j.keyCode==13){if(this.c==-1){this.cs();this.tooFast=true;setTimeout(this.setTooFast.bindAsEventListener(this),1000);return true}if(!this.ifSubmit){if((this.qType==0||this.qType==2)&&this.c>-1&&this.SD!=null){var b=this.SD.s[this.c];if(!!this.callback&&b.split("$")[3]!=""){this.tooFast=true;setTimeout(this.setTooFast.bindAsEventListener(this),1000);if(this._sq){addStat(STAT_SUGG_COUNT_WHAT)}else{addStat(STAT_SUGG_COUNT)}if(typeof(this.callback)=="function"){this.callback(this.T.getElementsByTagName("TR")[this.c].cells[3].childNodes[0].nodeValue,true)}}if(b.split("$")[3]!=""){this.c=-1}else{addStat(STAT_SUGG_COUNT);this.enterQuery=true;var d="";try{d=this.T.getElementsByTagName("TR")[this.c].cells[3].childNodes[0].nodeValue+this.T.getElementsByTagName("TR")[this.c].cells[2].childNodes[0].nodeValue}catch(j){d=this.T.getElementsByTagName("TR")[this.c].cells[3].innerHTML+this.T.getElementsByTagName("TR")[this.c].cells[2].innerHTML}if(typeof(this.callback)=="function"){this.callback(this.T.getElementsByTagName("TR")[this.c].cells[3].innerHTML,false)}this.sendQuery(d)}}else{this.enterQuery=true;this.sendQuery()}this.cs();preventDefault(j);return false}else{this.tooFast=true;setTimeout(this.setTooFast.bindAsEventListener(this),1000);return true}}if(j.keyCode==38||j.keyCode==40){this.mouseOnSug=false;if(this.S.style.display!="none"){var a=this.T.rows;if(this.closeBol==0){var c=a.length-1}else{var c=a.length}for(var f=0;f<c;f++){if(a[f].className=="mo"){this.c=f;break}}this.ct();var h;if(j.keyCode==38){if(this.c==0){if(this.specQuery1){this.I.value=this.queryWord}else{this.I.value=this.SD.q}this.c=-1;this.K=true}else{if(this.c==-1){this.c=c}h=a[--this.c];h.className="mo";this.I.value=h.cells[2].childNodes[0].nodeValue}}if(j.keyCode==40){if(this.c==c-1){if(this.specQuery1){this.I.value=this.queryWord}else{this.I.value=this.SD.q}this.c=-1;this.K=true}else{h=a[++this.c];h.className="mo";this.I.value=h.cells[2].childNodes[0].nodeValue}}if(!this.isIE){j.preventDefault()}}}},docMouseDown:function(a){e=a||window.event;var b=e.target||e.srcElement;if(b==this.I){return}while(b=b.parentNode){if(b==this.S||b==this.I){this.isClkSug=true;return}}if(this.timer3==0){this.timer3=setTimeout(this.cs.bindAsEventListener(this),200)}},docKeyDown:function(a){if(this.isGecko){e=a||window.event;if(e.ctrlKey){if(e.keyCode==61||e.keyCode==107||e.keyCode==109||e.keyCode==96||e.keyCode==48){this.resetSuggestion()}}}},beforeDeaSuggest:function(){if(this.E){window.event.cancelBubble=true;window.event.returnValue=false;this.E=false}},keyBlurSuggest:function(){if(!this.isClkSug){if(this.timer3==0){this.timer3=setTimeout(this.cs.bindAsEventListener(this),200)}}this.isClkSug=false},creatSugDiv:function(){if(!this.GE("bdmap_sug_"+this.sgId)){var sugdiv=this.C("div");with(sugdiv){id="bdmap_sug_"+this.sgId;className="sug";position="absolute";onselectstart="return false";style.display="none";style.zIndex="200"}document.body.appendChild(sugdiv)}this.S=this.GE("bdmap_sug_"+this.sgId);if(this.isIE){var sug_if=this.C("IFRAME");sug_if.src="javascript:void(0)";sug_if.id="bdmap_sugif_"+this.sgId;with(sug_if.style){display="none";position="absolute"}this.S.parentNode.insertBefore(sug_if,this.S)}if(this.qType==3){var nrtdiv=this.C("div");with(nrtdiv){id="noResTip"+this.sgId;className="sugtip";position="absolute";onselectstart="return false";style.display="none";style.zIndex="200"}document.body.appendChild(nrtdiv)}},disposeSug:function(){clearTimeout(this.timer2);this.timer2=0;this.s1=this.I.value;clearInterval(this.timer1);if(this.GE("bdmap_sug_"+this.sgId)){document.body.removeChild(this.GE("bdmap_sug_"+this.sgId))}if(this.GE("noResTip"+this.sgId)){document.body.removeChild(this.GE("noResTip"+this.sgId))}if(this.isIE&&this.GE("bdmap_sugif_"+this.sgId)){document.body.removeChild(this.GE("bdmap_sugif_"+this.sgId))}if(this.isIE&&this.GE("imgLogo")){this.GE("imgLogo").style.display="block";this.GE("imgLogo").style.display=""}},getPos:function(a){var c=0,b=0;while(a!=null){c+=a.offsetLeft;b+=a.offsetTop;a=a.offsetParent}return[c,b]},setTooFast:function(){this.tooFast=false},initialize:function(a,c,b){this.callback=c;this.closeSuggest=b;this.sgId=a.inputid;this.cookieN=a.cookiename||"bdmapsug";this.cityId=a.cityid||"modelConfig.cityCode";this.closeBol=a.closeB||0;this.qType=a.qType||0;this.nonResTip="抱歉，未找到相关的车站";this.offsetPos=a.offset||[0,0];this.closeTip=a.closeTip||0;this._sq=a._sq||false;this.mouseOnSug=false;this.queryWord="";this.ifSubmit=false;this.S=null;this.enterQuery=false;this.ifSend=true;this.I=this.GE(a.inputid);this.I.value="";this.tooFast=false;this.SD;this.CS=null;this.c=-1;this.K=false;this.mouseOnSug=false;this.specQuery1=false;this.E=false;this.isIE=navigator.userAgent.indexOf("MSIE")!=-1&&!window.opera;this.isWebKit=(navigator.userAgent.indexOf("AppleWebKit/")>-1);this.isGecko=(navigator.userAgent.indexOf("Gecko")>-1)&&(navigator.userAgent.indexOf("KHTML")==-1);this.timer3=0;this.T=null;this.s1="";this.s3="";this.timer1;this.timer2=0;this.isClkSug=false;this.I.setAttribute("autocomplete","off");this.creatSugDiv();this.I.onblur=this.keyBlurSuggest.bindAsEventListener(this);this.I.onkeydown=this.keyDownSuggest.bindAsEventListener(this);document.onmousedown=this.docMouseDown.bindAsEventListener(this);document.onkeydown=this.docKeyDown.bindAsEventListener(this);this.I.onbeforedeactivate=this.beforeDeaSuggest.bindAsEventListener(this);this.s3=this.I.value;this.timer1=setInterval(this.f.bindAsEventListener(this),10);BMAddEvent(window,"resize",this.resetPos.bindAsEventListener(this))}};var trans_bj={"立水桥":4,"知春路":3,"北土城":1.5,"惠新西街南口":1,"芍药居":4,"三元桥":4,"西直门":{"2-13":5,"13-2":5,"2-4":1,"4-2":1,"4-13":4,"13-4":4},"雍和宫":2,"复兴门":2,"建国门":2,"国贸":2,"崇文门":2,"东单":2,"四惠":1,"四惠东":1,"T2航站楼":3,"东直门":{"2-13":4,"13-2":4,"2-air":5,"air-2":5,"13-air":5,"air-13":5},"宣武门":1,"西单":4.5,"海淀黄庄":1,"宋家庄":1.5,"西二旗":2,"望京西":1.5,"公益西桥":1.5};var trans_shh={"上海南站":5,"上海体育馆":1,"莘庄":1,"西藏南路":1,"虹口足球场":4,"宝山路":1,"中潭路":1,"镇坪路":{"3-4":1,"4-3":1,"3-7":1,"7-3":1,"4-7":1,"7-4":1},"曹杨路":{"3-4":1,"4-3":1,"3-11":3,"11-3":3,"4-11":3,"11-4":3},"金沙江路":1,"延安西路":1,"虹桥路":{"3-4":1,"4-3":1,"3-10":2.5,"10-3":2.5,"4-10":2.5,"10-4":2.5},"蓝村路":1,"龙阳路":{"2-cxf":5,"cxf-2":5,"7-cxf":4,"cxf-7":4,"2-7":4,"7-2":4},"上海火车站":{"1-3":5,"1-4":5,"3-4":1,"3-1":5,"4-1":5,"4-3":1},"人民广场":{"1-2":5,"1-8":1,"2-8":5,"2-1":5,"8-1":1,"8-2":5},"中山公园":{"2-3":1,"2-4":2,"3-4":1,"3-2":1,"4-2":2,"4-3":1},"世纪大道":{"2-4":1,"2-6":3,"4-6":3,"4-2":1,"6-2":3,"6-4":3,"2-9":1,"9-2":1,"4-9":1,"9-4":1,"6-9":1,"9-6":1},"宜山路":{"3-4":1,"3-9":3,"4-9":3,"4-3":1,"9-3":3,"9-4":3},"静安寺":1,"常熟路":1,"肇嘉浜路":1,"东安路":1,"耀华路":1,"高科西路":1,"江苏路":3,"徐家汇":3,"陆家浜路":1,"嘉定新城":1,"陕西南路":1,"老西门":1,"南京东路":2,"海伦路":2,"四平路":1,"虹桥火车站":1,"虹桥2号航站楼":1,"陕西南路":1,"龙溪路":1};var trans_gzh={"公园前":2,"广州东站":1,"客村":1,"万胜围":1,"体育西路":{"1-3":1,"3-1":1,"1-zx":1,"zx-1":1,"3-zx":1,"zx-3":1},"广州火车站":2.5,"杨箕":1.5,"珠江新城":1,"车陂南":1,"昌岗":1.5,"西朗":1.5,"嘉禾望岗":1.5,"林和西":1,"赤岗塔":1};function showPrint(){showMask();showPrintDialog();addStat(STAT_SUB_PRINT)}function closePrint(){hideMask();hidePrintDialog()}function showMask(){var a;if(Fe.G("mask")){a=Fe.G("mask")}else{a=document.createElement("div");a.id="mask";document.body.appendChild(a);a.style.position="absolute";a.style.backgroundColor="#333";a.style.opacity="0.3";a.style.filter="alpha(opacity=30)";a.style.top=a.style.left="0";a.style.zIndex=11080210;Fe.on(a,"mousedown",closePrint)}csize=getClientSize();a.style.width=(csize.width>=0?csize.width:0)+"px";a.style.height=(csize.height>=0?csize.height:0)+"px";a.className="h";Fe.on(window,"resize",adjustMaskSize)}function hideMask(){if(Fe.G("mask")){Fe.G("mask").className=""}Fe.un(window,"resize",adjustMaskSize)}function adjustMaskSize(){var a=Fe.G("mask");if(!a||a&&a.style.display=="none"){return}var b=getClientSize();a.style.width=(b.width>=0?b.width:0)+"px";a.style.height=(b.height>=0?b.height:0)+"px"}function showPrintDialog(){var b;if(Fe.G("p_d")){b=Fe.G("p_d")}else{b=document.createElement("div");b.id="p_d";var f=[];f.push("<div class='t'><div class='tl'><div class='dimg'></div></div>");f.push("<div class='tc'><div class='ptitle' unselectable='on'>打印地图</div><div title='关闭' id='closePrintBtn'></div></div>");f.push("<div class='tr'><div class='dimg'></div></div></div>");f.push("<div class='m'><div class='ml'></div>");f.push("<div class='mc'>");f.push("<table align='center'><tr><td><img id='pthumb' src='"+subConfig[curCIndex].thumbsrc+"' /></td></tr></table>");f.push("</div><div class='mr'></div></div>");f.push("<div class='b'><div class='bl'><div class='dimg'></div></div>");f.push("<div class='bc'><div id='printBtn'></div><div id='cancelPrintBtn'></div></div>");f.push("<div class='br'><div class='dimg'></div></div></div>");b.innerHTML=f.join("");document.body.appendChild(b);Fe.on(Fe.G("closePrintBtn"),"click",closePrint);Fe.on(Fe.G("cancelPrintBtn"),"click",closePrint);Fe.on(Fe.G("printBtn"),"click",function(){window.print()});Fe.on(document,"keydown",function(g){g=window.event||g;if(g.keyCode==27){closePrint()}})}if(Fe.G("pthumb")){Fe.G("pthumb").src=subConfig[curCIndex].thumbsrc}b.className="h";var d=getClientSize();var a=((d.width-640)/2>=10?Math.floor((d.width-640)/2):10);var c=((d.height-480)/2>=10?Math.floor((d.height-480)/2):10);b.style.left=a+"px";b.style.top=c+"px"}function hidePrintDialog(){if(Fe.G("p_d")){Fe.G("p_d").className=""}if(Fe.G("pthumb")){Fe.G("pthumb").src=""}};
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>addStyle</title>
<style></style>
</head>

<body>
<div id="test" onclick="alert('test')" class="test">test</div>
<div id="test2" onclick="document.getElementById('test').onclick()" class="test">test2</div>
<div id="list"></div>
<script>
  alert(document.getElementById('test').onclick)
  var DocumentFragment=document.createDocumentFragment(),i=0,cs=document.getElementsByTagName('head')[0].getElementsByTagName('style')[0]
  var test=document.getElementById('test');
  for(var p in test){
	  var t;
	  if(p && test[p]){
		  DocumentFragment.appendChild(t=document.createElement('div')).className="zhi";
		  t.innerHTML="("+(++i)+")&nbsp;&nbsp;test."+p+"：===<span>"+test[p]+"</span>"; 
	  }
  }
  document.getElementById('list').appendChild(DocumentFragment);

  var addStyle = function(css,n){
          var D = document,
          S = window.style;
		  n && (S = D.getElementsByTagName('head')[0].getElementsByTagName('style')[0]);//如果head中有style，那么在原有的第一个style后面添加样式
          if(!S){
                  S = window.style = D.createElement('style');
                  S.setAttribute('type', 'text/css');
                  D.getElementsByTagName('head')[0].appendChild(S);
          };
          S.styleSheet && (S.styleSheet.cssText += css) || S.appendChild(D.createTextNode(css));
  };
  addStyle('body{background:#efefef}')
  addStyle('body{font-size:14px}')
  addStyle('body{color:#383838}',1)
  addStyle('.zhi span{color:#f60;font-weight:bold;margin-left:10px;font-size:14px}',1)
</script>
</body>
</html>

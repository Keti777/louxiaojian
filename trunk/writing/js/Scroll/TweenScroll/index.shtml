<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>缓冲滚动</title>
<style type="text/css">
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td{padding:0;margin:0;} 
body{font:12px/22px Tahoma,Verdana,"宋体";word-break:break-all;color:#333;text-align:center;}
fieldset,img{border:0;} 
table {border-collapse:collapse;border-spacing:0;} 
ol,li,ul{list-style:none;} 
address,caption,cite,code,dfn,em,strong,th,var{font-weight:normal;font-style:normal;} 
caption,th{text-align:left;} 
h1,h2,h3,h4,h5,h6{font-size:100%;} 
q:before,q:after{content:'';} 
abbr,acronym{border:0;}
input,select,textarea{font:normal normal 12px "Verdana";}
input,textarea{color:#666}
select{color:#999}
a{color:#2b6bad;text-decoration:none;outline:none;}
a:hover{color:#f60;text-decoration:underline;}
.fl{float:left;}
.fr{float:right}
fieldset{border:none;}
.hide{display:none;}
.center{text-align:center;}
.textr{text-align:right}
.clear:after{content:".";display:block;height:0;clear:both;visibility:hidden;}
* html>body .clear {display: inline-block;width:100%;}
* html .clear {/* Hides from IE-mac \*/height: 1%;/* End hide from IE-mac */}
/* ie7 hack*/
*+html .clearfix {min-height: 1% ;}
.tList a{text-decoration:none}
.tList li{overflow:hidden}

#wrapper{width:960px;margin:0 auto;text-align:left}
.scrollBx{width:800px;position:relative;margin:0 auto}
.scrollBx .scrollBd{width:720px;margin:0 auto;background:#eee;height:90px;position:relative;overflow:hidden}
.scrollBx .scrollBd ul{overflow:hidden;height:80px;position:absolute;top:5px}
.scrollBx .scrollBd ul li{float:left;padding:0 5px;display:inline}
.scrollBx .scrollBd ul li img{width:80px;height:80px;vertical-align:top}
.scrollBx .previous,.scrollBx .next{width:15px;position:absolute;cursor:pointer;top:12px}
.scrollBx .previous{left:0}
.scrollBx .next{right:0}
</style>

</head>

<body>
<div id="wrapper">
    <div class="scrollBx">
      <!--<div id="previous" class="previous" onclick="clickGoto(150)">上一组</div>-->
      <div id="previous" class="previous" onclick="clickGoto(180)" onmouseout="autoScroll()">上一组</div>
      <div class="scrollBd">
        <ul id="scrollid">
         <li><a href="#"><img src="img/sf-01.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-02.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-03.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-04.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-05.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-06.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-07.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-08.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-09.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-10.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-11.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/sf-12.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-01.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-02.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-03.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-04.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-05.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-06.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-07.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-08.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-09.jpg" alt="" /></a></li>
         <li><a href="#"><img src="img/kof-10.jpg" alt="" /></a></li>
        </ul>
      </div>
      <div id="next" class="next" onclick="clickGoto(-180);" onmouseout="autoScroll()">下一组</div>
      <!--<div id="next" class="next" onclick="clickGoto(-150)">下一组</div>-->
    </div>
    
</div>
<script type="text/javascript">
(function(){
	  /*===
	  t: current time（当前时间）；
	  b: beginning value（初始值）；
	  c: change in value（变化量）；单位像素
	  d: duration（持续时间）。
	  ps：Elastic和Back有其他可选参数，里面都有说明。
	  =====*/
	  var Tween = {
		  Quad: {
			  easeIn: function(t,b,c,d){
				  return c*(t/=d)*t + b;
			  }
		  }
	  } 
	  function $(o){return typeof(o)=='string' ? document.getElementById(o) : o}
	  function uncamelize(s, sep) {
		  sep = sep || '-';
		  return s.replace(/([a-z])([A-Z])/g, function (strMatch, p1, p2){
			  return p1 + sep + p2.toLowerCase();
		  });
	  };
	  function camelize(s) {
		  return s.replace(/-(\w)/g, function (strMatch, p1){
			  return p1.toUpperCase();
		  });
	  }
	  function setStyle(element, styles) {
		  // Retrieve an object reference
		  if(!(element = $(element))) return false;
		  // Loop through  the styles object an apply each property
		  for (property in styles) {
			  if(!styles.hasOwnProperty(property)) continue;
			  if(element.style.setProperty) {
				  //DOM2 Style method
				  element.style.setProperty(
				  uncamelize(property,'-'),styles[property],null);
			  } else {
				  //Alternative method
				  element.style[camelize(property)] = styles[property];
			  }
		  }
		  return true;
	  };
	  var timeid,scrollid=$('scrollid'),previous=$('previous'),next=$('next'),op,autoTimeId;
	  
	  /*获取滚动内容的宽度*/
	  function getWidth(a){
		  var subTags=scrollid.getElementsByTagName('li'),w=0;
		  if(a){w=subTags.length*a}else{
			  for(var i=0,j=subTags.length;i<j;i++){
				  w+=subTags[i].clientWidth > subTags[i].offsetWidth ? subTags[i].clientWidth : subTags[i].offsetWidth;
			  }
		  }
		  return w;
	  }
	  
	  /*上一页和下一页的样式*/
      function judgePageStyle(){
		 var l=scrollid.style['left'];
		 parseInt(l)==0 || !l ? setStyle(previous,{color:'#ccc',cursor:'text'}) : setStyle(previous,{color:'#000',cursor:'pointer'})
		 Math.abs(parseInt(l))==getWidth()-scrollid.parentNode.offsetWidth ? setStyle(next,{color:'#ccc',cursor:'text'}) : setStyle(next,{color:'#000',cursor:'pointer'});
		  
	  };
	  /*滚动函数*/
	  function goto(c,d,t){
		if(timeid){clearTimeout(timeid)}
		b=parseInt(scrollid.style['left']) || 0;
		var abs_b=Math.abs(b);
		if(c<0){
			if((op-abs_b)<Math.abs(c)){c=abs_b-op}//纠正移动路程
		    if(abs_b==op){return false}
		    }else{
			if(abs_b<c && abs_b!=op){c=abs_b}//纠正移动路程
			if(abs_b==0){return true}
		}
		new function(){
			scrollid.style['left'] = Math.ceil(Tween.Quad.easeIn(t,b,c,d)) + "px";
			judgePageStyle();
			if(t<d){t++; timeid=setTimeout(arguments.callee, 10);}else{t=0}
		};
		
	 }
	 window['goto']=goto;
	 
	 /*上一页和下一页的点击滚动函数*/
	 function clickGoto(c){
		 if(autoTimeId){clearInterval(autoTimeId)}
		 var d=20,t=0;
		 goto(c,d,t);
	 }
	 window['clickGoto']=clickGoto;
	 /*自动匀速地滚动*/
	 function autoScroll(){
	     if(autoTimeId){clearInterval(autoTimeId)}
		 var c=-2,t=d=1;
		 autoTimeId=setInterval("goto("+c+","+d+","+t+")",30)
	 };
	 window['autoScroll']=autoScroll;
	 /*初始化函数*/
	 var init=function(){
		 op=getWidth()-scrollid.parentNode.offsetWidth; //能滚动的总路程
		 scrollid.style.width=getWidth()+'px';
         judgePageStyle();
         autoScroll();
	}();
})()
</script>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>Javascript的链式调用</title>
<style type="text/css">
.c1{background:#f00}
.c2{background:#69C}
.c3{background:#30C}
.c4{background:#9C3}
div{font-size:14px;cursor:pointer; line-height:22px; margin:0 50px 5px 50px; padding-left:15px}
</style>
</head>

<body>
<div id="lxj">lxj</div>
<div id="lxj2">lxj2</div>
<div id="lxj3">lxj3</div>
<div id="lxj4">lxj4</div>
<div id="slxj">slxj</div>
<div id="slxj2">slxj2</div>
<div id="slxj3">slxj3</div>
<div id="slxj4">slxj4</div>
<script type="text/javascript">
function l(o){
  var S=document.getElementById(o);
	  S.addEvent=function(type, listener ){
		  var node=this;
		  if (node.addEventListener) {
			  node.addEventListener( type, listener, false );
			  return this;
		  } else if(node.attachEvent) {
			  node['e'+type+listener] = listener;
			  node[type+listener] = function(){node['e'+type+listener]( window.event );}
			  node.attachEvent( 'on'+type, node[type+listener] );
			  return this;
		  }
	  };
	  S.addClass=function(c){
		  if(this.className.indexOf(c)==-1){
             this.className+=' '+c;
		  }
		  return this;
	  };
	  return S
};
(function (){
	function _$(element){
		 this.element = document.getElementById(element);   
	}
	_$.prototype ={   
		 each :function(fn){   
			  for(var i=0,l=this.elements.length; i<l;i++){   
				fn.call(this,this.elements[i]);   
			  }   
			  return this;   
		 },   
		 setStyle:function(prop,val){   
			  this.each(function(el){   
			  el.style[prop]=val;   
			  });   
			  return this;   
		 },   
		 show:function(){   
			  var that=this;   
			  this.each(function(){   
			   that.setStyle("display","block");   
			  })   
			 return this;   
		  },
		  addClass:function(c){
			  if(this.element.className.indexOf(c)==-1){
				 this.element.className+=' '+c;
			  }
			  return this;
		  },
		 addEvent:function(type, listener ){
			  var node=this.element;
			  if (node.addEventListener) {
				   node.addEventListener( type, listener, false );
				  return this;
			    }else if(node.attachEvent) {
				   node['e'+type+listener] = listener;
				   node[type+listener] = function(){node['e'+type+listener]( window.event );}
				   node.attachEvent( 'on'+type, node[type+listener] );
				  return this;
			  }
		  }
	}   

    window.$ = function(o){return new _$(o);}
	  
})();
l('lxj').addEvent('click',function(){alert(this.innerHTML)}).addClass('c1')
l('lxj2').addEvent('click',function(){alert(this.innerHTML)}).addClass('c2')
l('lxj3').addEvent('click',function(){alert(this.innerHTML)}).addClass('c3')
l('lxj4').addEvent('click',function(){alert(this.innerHTML)}).addClass('c4')
$('slxj').addEvent('click',function(){alert(this.innerHTML)}).addClass('c1')
$('slxj2').addEvent('click',function(){alert(this.innerHTML)}).addClass('c2')
$('slxj3').addEvent('click',function(){alert(this.innerHTML)}).addClass('c3')
$('slxj4').addEvent('click',function(){alert(this.innerHTML)}).addClass('c4')
</script>
</body>
</html>

<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<link type="text/css" rel="stylesheet" href="http://assets.xmlhtml.cn/notes/notes.css"/>
<script type="text/javascript" src="http://assets.xmlhtml.cn/notes/notes.js"></script>
<title>setTimeout又一小应用</title>
</head>

<body>
<div id="page">
    <h1>setTimeout又一小应用</h1>
    <div id="content">
    
        <div id="ceshi">点我</div>
        <pre title="code" class="brush: jscript;">
        function $(id) {return "string" == typeof id ? document.getElementById(id) : id;};
        function addEvent( node, type, listener ) {
            if(!(node = $(node))) return false;
            if (node.addEventListener) {
                node.addEventListener( type, listener, false );
                return true;
            } else if(node.attachEvent) {
                node['e'+type+listener] = listener;
                node[type+listener] = function(){node['e'+type+listener]( window.event );}
                node.attachEvent( 'on'+type, node[type+listener] );
                return true;
            }
            return false;
        };
        addEvent(document.getElementById('ceshi'),'click',function(){alert('1')})
        addEvent(document.getElementById('ceshi'),'click',function(){alert('2')})
        /*在IE下，上面运行结果是2,1*/
        
        //addEvent(document.getElementById('ceshi'),'click',function(){setTimeout(function(){alert('2')},0)})
        /*用这种方法来处理的话在IE下，上面运行结果是1,2，和火狐google的运行结果一样*/
        </pre>
        <script type="text/javascript">
        function $(id) {return "string" == typeof id ? document.getElementById(id) : id;};
        function addEvent( node, type, listener ) {
            if(!(node = $(node))) return false;
            if (node.addEventListener) {
                node.addEventListener( type, listener, false );
                return true;
            } else if(node.attachEvent) {
                node['e'+type+listener] = listener;
                node[type+listener] = function(){node['e'+type+listener]( window.event );}
                node.attachEvent( 'on'+type, node[type+listener] );
                return true;
            }
            return false;
        };
        addEvent(document.getElementById('ceshi'),'click',function(){alert('1')})
        addEvent(document.getElementById('ceshi'),'click',function(){alert('2')})
        /*在IE下，上面运行结果是2,1*/
        
        //addEvent(document.getElementById('ceshi'),'click',function(){setTimeout(function(){alert('2')},0)})
        /*用这种方法来处理的话在IE下，上面运行结果是1,2，和火狐google的运行结果一样*/
        </script>
     </div>
</div>
</body>
</html>

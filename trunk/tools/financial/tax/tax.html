<!doctype html>
<html>
<head>
    <meta charset="gbk"/>
    <title>新个税计算器</title>
    <style type="text/css">
        *{margin:0;padding:0}
        body{font-size:14px}
        .input{border:1px solid #ccc;font-size:18px;color:#f00;font-weight:bold;height:24px;width:200px;vertical-align:top;}
        .from-item{line-height:26px;padding-bottom:10px}
        .button{padding:4px 7px}
    </style>
</head>
<body>

<div style="width:500px;margin:0 auto;padding:10px">
    <div class="from-item"><label>薪水：</label><input type="text" id="xinshui" value="" class="input"></div>
    <!--<div class="from-item"><label>三金：</label><input type="text" id="xinshui" value="" class="input"></div>-->
    <div class="from-item"><label>个税：</label><input type="text" id="test" value="" class="input"></div>
    <input type="button" class="button" value="计算" onclick="document.getElementById('test').value=chinaTax.getTax(document.getElementById('xinshui').value-chinaTax.begin);" />
</div>

<script>
(function(){
    window['chinaTax']={
        'begin':3500,
        'jb':[
            {level:1,income:'1-4500',tax:0.03,deduct:0},
            {level:2,income:'4500-7500',tax:0.1,deduct:75},
            {level:3,income:'7500-12000',tax:0.2,deduct:525},
            {level:5,income:'12000-38000',tax:0.25,deduct:975},
            {level:4,income:'38000-58000',tax:0.3,deduct:2725},
            {level:6,income:'58000-83000',tax:0.35,deduct:5475},
            {level:7,income:'83000-above',tax:0.45,deduct:13475}
        ],
        'getLevel': function (value){
            var l,suanfa=this.jb;
            for(var i=0,ii=suanfa.length;i<ii;i++){
                var income;
                if(value>suanfa[ii-1].income.split('-')[0]){
                    l=suanfa[ii-1].level;
                    break;
                }
                income=suanfa[i].income.split('-');
                if(value>=income[0] && value<income[1] && value<suanfa[6].income.split('-')[0]){
                    l=suanfa[i].level;
                    break;
                }
            }
            return l;
        },
        'getTax': function (value){
            var l=this.getLevel(value)-1,suanfa=this.jb;
            return value*suanfa[l].tax-suanfa[l].deduct;
        }
    };
})();
</script>
</body>
</html>
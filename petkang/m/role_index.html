<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>角色管理</title>
<link rel="stylesheet" href="m/admin_common.css" />
<script>function idf(id){return document.getElementById(id);};function xmlhttpxmlhttp(){this.new2=function(){return document.all?_IE_xmlhttp():_FF_xmlhttp();}};_IE_xmlhttp.prototype = new xmlhttpxmlhttp;function _IE_xmlhttp(){var xmlhttp=null;try{xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");}catch (e){try{xmlhttp= new ActiveXObject("Msxml2.XMLHTTP");}catch (err){return xmlhttp;}}return xmlhttp;}_FF_xmlhttp.prototype  = new xmlhttpxmlhttp; function _FF_xmlhttp(){var xmlhttp=null; xmlhttp= new XMLHttpRequest();if (!xmlhttp)return null;return xmlhttp; }
function edit_role(id)
{
	var xml= new xmlhttpxmlhttp().new2();
	xml.open('GET',"/m.php?act=role_edit&role_id="+id+"&t="+Math.random(), true);
	xml.onreadystatechange =function(){if (xml.readyState==4 && xml.status==200){idf('edit_pl').innerHTML=xml.responseText;idf('role_name2').focus();}	}
	xml.send(null);
}
</script>
</head>

<body>
<!--warpper-->
<div id="warpper">
<!--container-->
<div id="container">
<!--areaone-->
   	<div class="areaone">

<form action="m.php?act=role_add_do" method="post" name="role_add_do" id="role_add_do">
  <table width="100%" border="1" cellspacing="0" cellpadding="2">
  <tr class="trheader">
    <td height="32" colspan="2">添加新角色</td>
    </tr>
  <tr>
    <td width="20%" height="32">角色名称</td>
    <td><input name="role_name" type="text" id="role_name" value="<?=$_POST['role_name']?>" size="60" /></td>
  </tr>
  <tr>
    <td height="32">备注</td>
    <td><textarea name="role_note" cols="60" rows="8" id="role_note"><?=$_POST['role_note']?></textarea></td>
  </tr>
  <tr>
    <td height="32">&nbsp;</td>
    <td><input type="submit" name="Submit" value="提交" /></td>
  </tr>
</table></form><br />

<div id="edit_pl"></div>

<table width="100%" border="1" cellspacing="0" cellpadding="2">
  <tr  class="trheader">
    <td height="32" colspan="3">角色列表</td>
    </tr>
<?foreach($this->all_data['角色'] as $v){?>	
  <tr onclick="cb(this)">
    <td height="32"><?=$v['role_id']?>/<?=$v['role_name']?>/<?=$v['role_note']?>/创建于:<?=$v['role_time_show']?>&nbsp;/<a href="javascript:edit_role(<?=$v['role_id']?>)">编辑</a>/<a href="m.php?act=role_delete_do&role_id=<?=$v['role_id']?>"  onclick="if(!confirm('确认删除?操作不可撤销!')) return false;">删除</a></td>
    <td><a href="m.php?act=role_resource&amp;role_id=<?=$v['role_id']?>">拥有资源[已经拥有
      <?=(int)$v['resource_count']?>]</a></td>
    <td><a href="m.php?act=role_user&amp;role_id=<?=$v['role_id']?>">拥有帐户[已经拥有
      <?=(int)$v['user_count']?>]</a></td>
  </tr>
<?}?>  
  <tr>
    <td height="32" colspan="3"><?=$this->pageObj->show();?>&nbsp;</td>
    </tr>
</table>

	


	</div>
<!--//areaone -->
</div>
<!--//container -->
</div>   
<!--//warpper -->

<SCRIPT>function cb(divObj) { try  {if(divObj.clickMarkBGColor!=null){divObj.style.backgroundColor=divObj.clickMarkBGColor;divObj.clickMarkBGColor=null;}else{divObj.clickMarkBGColor=divObj.style.backgroundColor;divObj.style.backgroundColor='rgb(212,229,251)';} }catch(e){alert(e['message'])}}</SCRIPT>
	
</body>
</html>
